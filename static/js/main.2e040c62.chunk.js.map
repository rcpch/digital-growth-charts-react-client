{"version":3,"sources":["components/subcomponents/GestationSelect.js","components/subcomponents/MeasurementMethodSelect.js","components/subcomponents/ReferenceSelect.js","components/subcomponents/SexChoice.js","selectData/measurementOptions.js","selectData/sexOptions.js","selectData/referenceOptions.js","components/subcomponents/ErrorText.js","components/subcomponents/BoneAge.js","functions/dateHelpers.js","components/subcomponents/UtilitiesForm.js","components/MeasurementForm.js","api/Chart.js","functions/canvasFromSVG.js","functions/addToClipboard.js","functions/deepCopy.js","functions/units.js","components/subcomponents/TableCellObservationValue.js","components/subcomponents/TableCellMeasurementAges.js","components/subcomponents/TableCellObservationDate.js","components/subcomponents/TableCellCentiles.js","components/subcomponents/TableCellSDS.js","components/subcomponents/ResultsDataTableRow.js","components/subcomponents/ResultsDataTable.js","components/subcomponents/ResultsSegment.js","components/subcomponents/ErrorModal.js","components/subcomponents/IntervalSelect.js","components/subcomponents/Slider.js","selectData/intervalOptions.js","components/FictionalChildForm.js","hooks/useRcpchApi.js","hooks/useGlobalState.js","components/MeasurementSegment.js","pages/Home.js","App.js","serviceWorker.js","index.js"],"names":["GestationSelect","props","gestationWeeksOptions","gestWeeks","push","key","toString","value","text","Select","compact","name","weeks","options","onChange","e","val","handleGestationChange","days","MeasurementMethodSelect","placeholder","measurementMethod","handleChangeMeasurementMethod","measurementOptions","ReferenceSelect","reference","handleChangeReference","referenceOptions","SexSelect","sex","handleSexChange","sexOptions","disabled","ErrorText","errorText","showError","makeErrorVisible","Message","color","boneAgeOptions","BoneAgeTypeSelect","Form","Group","Field","style","textAlign","width","Input","type","labelPosition","label","content","basic","boneAge","handleBoneAgeChange","boneAgeSDS","handleBoneAgeSDSChange","boneAgeCentile","handleBoneAgeCentileChange","boneAgeText","handleBoneAgeTextChange","boneAgeType","handleChangeBoneAgeType","formatDate","inputDate","date","month","day","year","getTime","Date","getMonth","getDate","getFullYear","length","join","error","Error","parseDate","workingArray","split","map","element","index","madeNumber","Number","isNaN","parsedArray","jsYear","jsMonth","jsDay","validMaxDaysInMonth","undefined","isDaysInMonthValid","UtilitiesForm","Container","Header","as","paddingTop","onSubmit","utilitiesFormDataSubmit","required","changeMaternalHeight","maternalHeight","changePaternalHeight","paternalHeight","Button","fluid","midParentalHeightDataPresent","onClick","removeMidParentalHeight","MeasurementForm","useState","birth_date","setBirth_date","observation_date","setObservation_date","observation_value","measurement","setMeasurement","gestation_weeks","setGestation_weeks","gestation_days","setGestation_days","birth_date_error","setBirth_date_error","observation_date_error","setObservation_date_error","observation_value_error","setObservation_value_error","form_valid","setForm_valid","setBoneAge","setBoneAgeType","setBoneAgeSDS","setBoneAgeCentile","setBoneAgeText","events","setEvents","showBoneAge","setShowBoneAge","showEvents","setShowEvents","handleChangeDate","event","target","newDate","observation_date_object","birth_date_object","timeInterval","validateObservationValue","measurement_method","useEffect","formIsValid","globalState","clearMeasurement","newMeasurement","updateGlobalState","makeDynamic","option","newDisabled","dynamicMeasurementOptions","dynamicSexOptions","boneageData","eventText","events_text","parseFloat","bone_age","bone_age_type","bone_age_centile","bone_age_sds","bone_age_text","measurementFormData","formData","Object","assign","handleMeasurementResult","marginRight","data","newMeasurementMethod","units","observation","icon","preventDefault","Icon","Segment","BoneAge","anEvent","thisEvent","circular","allEvents","handleAddEvent","newEvents","filter","ev","handleRemoveEvent","isDataPresent","height_maternal","height_paternal","handleUtilitiesFormDataSubmit","heights","parentalHeights","mid_parental_height","exportChartCallback","svg","Promise","resolve","reject","outerHTMLSVG","outerHTML","match","replace","blob","Blob","domURL","window","URL","webkitURL","blobURL","createObjectURL","height","parseInt","canvas","document","createElement","ctx","getContext","image","Image","onload","drawImage","this","revokeObjectURL","src","canvasFromSVG","then","result","toBlob","item","ClipboardItem","navigator","clipboard","write","ChartData","isLoading","measurements","measurementsArray","chartType","Dimmer","active","Loader","title","midParentalHeightData","theme","enableZoom","enableExport","clinicianFocus","deepCopyArray","oldArray","copyArray","forEach","Array","isArray","deepCopyObject","oldObject","tempObject","deepCopy","input","TableCellObservationValue","child_observation_value","Table","Cell","TableCellMeasurementAges","measurementDates","decimalAge","ageChoice","chronologicalStyles","correctedAge","corrected_decimal_age","toFixed","corrected_calendar_age","chronologicalAge","chronological_decimal_age","chronological_calendar_age","TableCellObservationDate","observationDate","measurement_dates","toLocaleDateString","TableCellCentiles","measurementCentiles","correctedCentile","corrected_centile","chronologicalCentile","chronological_centile","TableCellSDS","measurementSDS","correctedSDS","Math","round","corrected_sds","chronologicalSDS","chronological_sds","ResultsDataTableRow","Row","measurement_calculated_values","ResultsDataTable","setAgeChoice","setDecimalAge","fontWeight","Checkbox","toggle","fitted","marginLeft","celled","HeaderCell","Body","ResultsSegment","apiResult","panesBlueprint","menuItem","measurementName","weight","bmi","ofc","choice","setChoice","fontStyle","panes","details","Menu","Item","render","Tab","Pane","attached","dataTitle","menu","secondary","pointing","activeIndex","onTabChange","ErrorModal","body","handleClose","visible","handleCancel","showCancel","Modal","open","size","closeOnEscape","Content","Actions","negative","IntervalTypeSelect","intervalType","handleChangeIntervalType","intervalTypeOptions","Slider","padding","min","max","step","className","display","isPercentage","FictionalChildForm","setWeeks","setDays","startingAge","setStartingAge","endingAge","setEndingAge","setIntervalType","interval","setInterval","driftFlag","setDriftFlag","drift","setDrift","noiseFlag","setNoiseFlag","noise","setNoise","startSDS","setStartSDS","errorMessage","setErrorMessage","handleBigButtonPress","values","start_chronological_age","end_age","measurement_interval_type","measurement_interval_number","start_sds","drift_range","noise_range","fictionalFormDataSubmit","handleObservationChange","intervalOptions","checked","console","log","fetchFromApi","inputParameters","mode","a","url","prod_url","process","headers","axios","method","response","makeInitialState","turner","midParentalHeights","mid_parental_height_sds","mid_parental_height_centile","mid_parental_height_centile_data","mid_parental_height_lower_centile_data","mid_parental_height_upper_centile_data","mid_parental_height_lower_value","mid_parental_height_upper_value","calculation","output","errors","message","isMidparentalCalculation","useRcpchApi","apiState","setApiState","fetchResult","useCallback","newInput","old","mutable","removeLastFromArrays","oldState","both","pop","newOutput","removeLastActiveItem","clearBothActiveArrays","clearApiErrors","relevantArray","latestInput","ignore","measurementError","resultAsArray","concat","singleResult","corrected_measurement_error","chronological_measurement_error","catch","errorForUser","results","apiErrors","makeGlobalState","modeActiveIndex","measurementMethodActiveIndex","male","female","resetCurrent","undoLast","measurementMethodActiveIndexLookup","useGlobalState","setGlobalState","makeGlobalStateUpdater","newValue","birth_data","i","tempMeasurementMethod","existingResults","oldResult","themeOptions","MeasurementSegment","centile","setCentile","setTheme","flip","setFlip","errorModal","setErrorModal","clinician","setClinician","useMemo","handleTabChange","handleChangeTheme","find","o","handleResults","latestResult","errorString","newGestation","newErrors","JSON","stringify","oldGestation","Chart","TabPanes","FormPanes","ThemeSelection","Dropdown","floating","inline","Grid","padded","Column","verticalAlign","columns","radio","header","Home","App","Boolean","location","hostname","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"kTA+CeA,MA5Cf,SAAyBC,GAGvB,IAFA,IAAIC,EAAwB,GACxBC,EAAY,GACTA,GAAa,IAClBD,EAAsBE,KAAK,CACzBC,IAAKF,EAAUG,SAAS,IACxBC,MAAOJ,EACPK,KAAML,EAAUG,SAAS,MAE3BH,IAaF,OACE,iCACE,cAACM,EAAA,EAAD,CACEC,SAAO,EACPC,KAAK,kBACLJ,MAAON,EAAMW,MACbC,QAASX,EACTY,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAMgB,sBAAsBD,MANtD,QASE,cAACP,EAAA,EAAD,CACEC,SAAO,EACPC,KAAK,iBACLJ,MAAON,EAAMiB,KACbL,QAxBuB,CAC3B,CAAER,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,KAC5B,CAAEH,IAAK,IAAKE,MAAO,EAAGC,KAAM,MAkBxBM,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAMgB,sBAAsBD,MAdtD,iBCZWG,MAZf,SAAiClB,GAC/B,OACE,cAACQ,EAAA,EAAD,CACEE,KAAK,qBACLS,YAAY,cACZb,MAAON,EAAMoB,kBACbP,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAMqB,8BAA8BN,EAAIT,QAC9DM,QAASZ,EAAMsB,sBCKNC,MAZf,SAAyBvB,GACvB,OACE,cAACQ,EAAA,EAAD,CACEE,KAAK,YACLS,YAAY,SACZb,MAAON,EAAMwB,UACbX,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAMyB,sBAAsBV,IAClDH,QAASZ,EAAM0B,oBCKNC,MAZf,SAAmB3B,GACjB,OACE,cAACQ,EAAA,EAAD,CACEE,KAAK,MACLS,YAAY,MACZb,MAAON,EAAM4B,IACbf,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAM6B,gBAAgBd,IAC5CH,QAASZ,EAAM8B,cCGNR,EAZY,CACvB,CAAElB,IAAK,SAAUE,MAAO,SAAUC,KAAM,cAAewB,UAAU,GACjE,CAAE3B,IAAK,SAAUE,MAAO,SAAUC,KAAM,cAAewB,UAAU,GACjE,CAAE3B,IAAK,MAAOE,MAAO,MAAOC,KAAM,iBAAewB,UAAU,GAC3D,CACI3B,IAAK,MACLE,MAAO,MACPC,KAAM,0BACNwB,UAAU,ICHHD,EALI,CACf,CAAE1B,IAAK,OAAQE,MAAO,OAAQC,KAAM,MAAOwB,UAAU,GACrD,CAAE3B,IAAK,SAAUE,MAAO,SAAUC,KAAM,OAAQwB,UAAU,ICI/CL,EANU,CACrB,CAAEtB,IAAK,SAAUE,MAAO,SAAUC,KAAM,UACxC,CAAEH,IAAK,aAAcE,MAAO,aAAcC,KAAM,mBAChD,CAAEH,IAAK,SAAUE,MAAO,SAAUC,KAAM,sB,SCD7B,SAASyB,EAAT,GAA8C,IAAzBC,EAAwB,EAAxBA,UAAWC,EAAa,EAAbA,UAC7C,IAAKD,EACH,OAAO,KAET,IAAIE,IAAmBF,EAIvB,OAHkB,IAAdC,IACFC,GAAmB,GAEd,mCAAGA,GAAoB,cAACC,EAAA,EAAD,CAASC,MAAM,MAAf,SAAsBJ,MCRtD,IAAMK,EAAiB,CACrB,CAAElC,IAAK,KAAME,MAAO,gBAAiBC,KAAM,mBAC3C,CACEH,IAAK,OACLE,MAAO,uBACPC,KAAM,wBAER,CACEH,IAAK,QACLE,MAAO,wBACPC,KAAM,yBAER,CAAEH,IAAK,OAAQE,MAAO,OAAQC,KAAM,QACpC,CAAEH,IAAK,OAAQE,MAAO,YAAaC,KAAM,cAmF5BgC,MAhFf,SAA2BvC,GACzB,OACE,qCACE,cAACwC,EAAA,EAAKC,MAAN,UACE,cAACD,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,KAAhD,SACE,cAACC,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,UACLS,YAAY,WACZ6B,cAAc,QACdC,MAAO,CACLC,QAAS,QACTC,OAAO,EACPd,MAAO,SAET/B,MAAON,EAAMoD,QACbvC,SAAUb,EAAMqD,0BAItB,eAACb,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,IAAhD,SACE,cAACC,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,aACLS,YAAY,YACZ6B,cAAc,QACdC,MAAO,CACLC,QAAS,MACTC,OAAO,EACPd,MAAO,SAET/B,MAAON,EAAMsD,WACbzC,SAAUb,EAAMuD,2BAGpB,cAACf,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,IAAhD,SACE,cAACC,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,iBACLS,YAAY,UACZ6B,cAAc,QACdC,MAAO,CACLC,QAAS,UACTC,OAAO,EACPd,MAAO,SAET/B,MAAON,EAAMwD,eACb3C,SAAUb,EAAMyD,kCAItB,cAACjB,EAAA,EAAKC,MAAN,UACE,eAACD,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,KAAhD,UACE,4CACA,cAACC,EAAA,EAAD,CACEC,KAAK,OACLrC,KAAK,cACLS,YAAY,iCACZb,MAAON,EAAM0D,YACb7C,SAAUb,EAAM2D,+BAItB,cAACnB,EAAA,EAAKC,MAAN,UACE,eAACD,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,KAAhD,UACE,uDACA,cAACrC,EAAA,EAAD,CACEE,KAAK,cACLS,YAAY,WACZb,MAAON,EAAM4D,YACb/C,SAAU,SAACC,EAAGC,GAAJ,OAAYf,EAAM6D,wBAAwB9C,IACpDH,QAAS0B,a,SC1FRwB,EAAa,SAACC,GACvB,IAAIC,EACAC,EACAC,EACAC,EACJ,IAaI,OAZAJ,EAAUK,UAEVH,EAAQ,KADRD,EAAO,IAAIK,KAAKN,IACGO,WAAa,GAChCJ,EAAM,GAAKF,EAAKO,UAChBJ,EAAOH,EAAKQ,cACRP,EAAMQ,OAAS,IACfR,EAAQ,IAAMA,GAEdC,EAAIO,OAAS,IACbP,EAAM,IAAMA,GAGT,CAACC,EAAMF,EAAOC,GAAKQ,KAAK,KACjC,MAAOC,GACL,MAAM,IAAIC,MAAM,8CAIXC,EAAY,SAACd,GAwBtB,IACI,IACMe,EADYf,EAAUgB,MAAM,KACHC,KAAI,SAACC,EAASC,GACzC,GAAgB,KAAZD,EAAgB,CAChB,IAAME,EAAaC,OAAOH,GAC1B,GAAIG,OAAOC,MAAMF,GACb,MAAM,IAAIP,MAEV,OAAiB,IAAVM,EAAcC,EAAa,EAAIA,EAG1C,MAAM,IAAIP,SAGlB,GAC4B,IAAxBE,EAAaL,QACbK,EAAa,GAAK,GAClBA,EAAa,GAAK,IAClBA,EAAa,GAAK,GAClBA,EAAa,GAAK,GAElB,MAAM,IAAIF,MAEd,GA9CuB,SAACU,GACxB,kBAAiCA,EAAjC,GAAOC,EAAP,KAAeC,EAAf,KAAwBC,EAAxB,KACA,GAAgB,IAAZD,GAA2B,KAAVC,EACjB,OAAIF,EAAS,IAAM,EAMnB,IAGMG,EAHoB,CACtB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEFF,GAC9C,YAC4BG,IAAxBD,GACAD,GAASC,EA+BbE,CAAmBd,GACnB,OAAO,YAAIT,KAAX,YAAmBS,IAEnB,MAAM,IAAIF,MAEhB,MAAOD,GACL,OAAO,OCNAkB,EArEO,SAAC7F,GACrB,OACE,eAAC8F,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACEC,GAAG,KACHpD,UAAU,OACVD,MAAO,CACLsD,WAAY,IAJhB,gCASA,eAACzD,EAAA,EAAD,CAAM0D,SAAUlG,EAAMmG,wBAAtB,UACE,eAAC3D,EAAA,EAAKC,MAAN,WACE,eAACD,EAAA,EAAKE,MAAN,CAAYG,MAAO,EAAGuD,UAAQ,EAA9B,UACE,uBAAOzD,MAAO,CAAEC,UAAW,QAA3B,6BACA,cAACE,EAAA,EAAD,CACEpC,KAAK,kBACLG,SAAUb,EAAMqG,qBAChBlF,YAAY,WACZb,MAAON,EAAMsG,eAAiBtG,EAAMsG,eAAiB,GACrDrD,MAAO,CACLC,QAAS,KACTC,OAAO,EACPd,MAAO,SAETW,cAAc,aAGlB,eAACR,EAAA,EAAKE,MAAN,CAAYG,MAAO,EAAGuD,UAAQ,EAA9B,UACE,uBAAOzD,MAAO,CAAEC,UAAW,QAA3B,6BACA,cAACE,EAAA,EAAD,CACEpC,KAAK,kBACLS,YAAY,WACZN,SAAUb,EAAMuG,qBAChBjG,MAAON,EAAMwG,eAAiBxG,EAAMwG,eAAiB,GACrDvD,MAAO,CACLC,QAAS,KACTC,OAAO,EACPd,MAAO,SAETW,cAAc,gBAIpB,cAACR,EAAA,EAAKE,MAAN,UACE,cAAC+D,EAAA,EAAD,CACE1E,UACE/B,EAAMsG,iBAAkBtG,EAAMwG,eAEhCnE,MAAM,QACNqE,OAAO,EACP3D,KAAM,SANR,6CAWD/C,EAAM2G,8BACL,cAACnE,EAAA,EAAKE,MAAN,UACE,cAAC+D,EAAA,EAAD,CAAQ1D,KAAK,SAAS6D,QAAS5G,EAAM6G,wBAArC,iDCgiBGC,EAlkBS,SAAC9G,GACvB,MAAoC+G,mBAASjD,EAAW,IAAIO,OAA5D,mBAAO2C,EAAP,KAAmBC,EAAnB,KACA,EAAgDF,mBAC9CjD,EAAW,IAAIO,OADjB,mBAAO6C,EAAP,KAAyBC,EAAzB,KAGA,EAAsCJ,mBAAS,CAC7CK,kBAAmB,KADrB,mBAAOC,EAAP,KAAoBC,EAApB,KAGA,EAA8CP,mBAAS,IAAvD,mBAAOQ,EAAP,KAAwBC,EAAxB,KACA,EAA4CT,mBAAS,GAArD,mBAAOU,EAAP,KAAuBC,EAAvB,KACA,EAAgDX,mBAAS,IAAzD,mBAAOY,EAAP,KAAyBC,EAAzB,KACA,EAA4Db,mBAAS,IAArE,mBAAOc,EAAP,KAA+BC,EAA/B,KACA,EACEf,mBAAS,SADX,oBAAOgB,GAAP,MAAgCC,GAAhC,MAEA,GAAoCjB,oBAAS,GAA7C,qBAAOkB,GAAP,MAAmBC,GAAnB,MACA,GAA8BnB,mBAAS,IAAvC,qBAAO3D,GAAP,MAAgB+E,GAAhB,MACA,GAAsCpB,mBAAS,iBAA/C,qBAAOnD,GAAP,MAAoBwE,GAApB,MACA,GAAoCrB,mBAAS,IAA7C,qBAAOzD,GAAP,MAAmB+E,GAAnB,MACA,GAA4CtB,mBAAS,IAArD,qBAAOvD,GAAP,MAAuB8E,GAAvB,MACA,GAAsCvB,mBAAS,IAA/C,qBAAOrD,GAAP,MAAoB6E,GAApB,MACA,GAA4BxB,mBAAS,CAAC,KAAtC,qBAAOyB,GAAP,MAAeC,GAAf,MACA,GAAsC1B,oBAAS,GAA/C,qBAAO2B,GAAP,MAAoBC,GAApB,MACA,GAAoC5B,oBAAS,GAA7C,qBAAO6B,GAAP,MAAmBC,GAAnB,MAiCMC,GAAmB,SAACC,GACF,eAAtBA,EAAMC,OAAOtI,KACTuG,EAAc8B,EAAMC,OAAO1I,OAC3B6G,EAAoB4B,EAAMC,OAAO1I,OACrC,IAAM2I,EAAUpE,EAAUkE,EAAMC,OAAO1I,OACvC,GAAI2I,EAAS,CACX,IAAMC,EACkB,eAAtBH,EAAMC,OAAOtI,KACTmE,EAAUqC,GACV+B,EACAE,EACkB,eAAtBJ,EAAMC,OAAOtI,KAAwBuI,EAAUpE,EAAUmC,GACrDoC,EACJF,EAAwB9E,UAAY+E,EAAkB/E,UACpDgF,EAAe,EACS,eAAtBL,EAAMC,OAAOtI,KACfkH,EACE,2DAE6B,qBAAtBmB,EAAMC,OAAOtI,MACtBoH,EACE,6DAGKsB,EAAe,WACE,eAAtBL,EAAMC,OAAOtI,KACfkH,EAAoB,gDAEpBE,EACE,iDAIJF,EAAoB,IACpBE,EAA0B,SAGF,eAAtBiB,EAAMC,OAAOtI,KACfkH,EAAoB,8BAEpBE,EAA0B,+BAiB1BuB,GAA2B,SAACC,EAAoBlC,GACpD,MAA0B,KAAtBA,EACK,QAELhC,OAAOC,MAAMD,OAAOgC,IACf,+BAEkB,WAAvBkC,EACElC,EAAoB,GACf,OAASkC,EAAqB,2BAC5BlC,EA9HK,IA+HP,OAASkC,EAAqB,4BAE9B,GAGgB,WAAvBA,EACElC,EAAoB,IACf,OAASkC,EAAqB,2BAC5BlC,EAtIU,IAuIZ,OAASkC,EAAqB,6BAE9B,GAGgB,QAAvBA,EACElC,EAAoB,EACf,OAASkC,EAAqB,2BAC5BlC,EA9IgB,IA+IlB,OAASkC,EAAqB,4BAE9B,GAGgB,QAAvBA,EACElC,EAAoB,GACf,OAASkC,EAAqB,2BAC5BlC,EAAoB,GACtB,OAASkC,EAAqB,4BAE9B,QANX,GAuKFC,qBAAU,WACR,IAAMC,EAAc,WAClB,MACuB,KAArB7B,GAC2B,KAA3BE,GAC4B,KAA5BE,IAWJ,GAHIyB,KACFtB,GAAcsB,KAEZxJ,EAAMyJ,YAAYC,iBAAkB,CACtC,IAAMC,EAAc,eAAQtC,GAC5BsC,EAAevC,kBAAoB,GACnCE,EAAeqC,GACf3B,GAA2B,SAC3BE,IAAc,GACdS,IAAe,GACfE,IAAc,GACdJ,GAAU,CAAC,KACXH,GAAkB,IAClBD,GAAc,IACdD,GAAe,iBACfG,GAAe,IACfvI,EAAM4J,kBAAkB,oBAAoB,MAE7C,CACD3B,GACAS,GACAE,GACAJ,GACAhF,GACAF,GACAM,GACAF,GACA1D,EACAqH,EACAM,EACAE,EACAE,KAGF,IAAM8B,GAAc,SAACC,GACnB,IAAMC,EAAc/J,EAAMyJ,YAAY1H,SAAS+H,EAAO1J,KACtD,OAAO,2BAAK0J,GAAZ,IAAoB/H,SAAUgI,KAE1BC,GAA4B1I,EAAmB0D,IAAI6E,IAEnDI,GAAoBnI,EAAWkD,IAAI6E,IAEzC,OACE,eAAC/D,EAAA,EAAD,WACE,eAACtD,EAAA,EAAD,CAAM0D,SArNW,WAEnB,IAAIgE,EAAc,GACdC,EAAY,CACd3B,OAAQ,IAENA,GAAO/D,OAAS,GAAK+D,GAAO,GAAG/D,OAAS,IAC1C0F,EAAY,CACVC,YAAa5B,KAGbE,KACGrD,MAAMgF,WAAWjH,OACpB8G,EAAc,CACZI,SAAUD,WAAWjH,IACrBmH,cAAe3G,GACf4G,iBAAkBnF,MAAMgF,WAAW7G,KAC/B,KACA6G,WAAW7G,IACfiH,aAAcpF,MAAMgF,WAAW/G,KAC3B,KACA+G,WAAW/G,IACfoH,cAAehH,MAIrB,IAAMiH,EAAsB,CAC1B3D,WAAYA,EACZE,iBAAkBA,EAClBoC,mBAAoBtJ,EAAMyJ,YAAYrI,kBACtCgG,kBAAmBC,EAAYD,kBAC/BG,gBAAiBA,EACjBE,eAAgBA,EAChB7F,IAAK5B,EAAMyJ,YAAY7H,KAGnBgJ,EAAWC,OAAOC,OAAOH,EAAqBT,EAAaC,GACjEnK,EAAM+K,wBAAwBH,IAgL5B,UACE,eAACpI,EAAA,EAAKE,MAAN,CAAY0D,UAAQ,EAApB,UACE,cAACL,EAAA,EAAD,CAAQC,GAAG,KAAKpD,UAAU,OAA1B,uBAGA,cAAC,EAAD,CACEpB,UAAWxB,EAAMyJ,YAAYjI,UAC7BC,sBAjWoB,SAAC,GAAe,IAAbnB,EAAY,EAAZA,MACjB,WAAVA,GACFN,EAAM4J,kBAAkB,sBAAuB,SAEjD5J,EAAM4J,kBAAkB,YAAatJ,IA8V7BoB,iBAAkBA,OAGtB,eAACc,EAAA,EAAKE,MAAN,CAAY0D,UAAQ,EAApB,UACE,cAACL,EAAA,EAAD,CAAQC,GAAG,KAAKpD,UAAU,OAA1B,mBAGA,cAACE,EAAA,EAAD,CACEG,MAAM,aACNF,KAAK,OACLrC,KAAK,aACLJ,MAAO0G,EACP7F,YAAY,gBACZN,SAAUiI,QAGd,cAACtG,EAAA,EAAKE,MAAN,CAAY0D,UAAQ,EAApB,SACE,cAACtD,EAAA,EAAD,CACEG,MAAM,mBACNF,KAAK,OACLrC,KAAK,mBACLJ,MAAO4G,EACP/F,YAAY,sBACZN,SAAUiI,OAGd,cAAC9G,EAAD,CAAWC,UAAW4F,IACtB,cAAC7F,EAAD,CAAWC,UAAW0F,IAEtB,eAACnF,EAAA,EAAKC,MAAN,CAAYE,MAAO,CAAEC,UAAW,QAAhC,UACE,eAACJ,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEqI,YAAa,IAAM5E,UAAQ,EAAhD,UACE,wCACA,cAAC,EAAD,CACExE,IAAK5B,EAAMyJ,YAAY7H,IACvBC,gBAnMY,SAACd,GACvBf,EAAM4J,kBAAkB,MAAO7I,EAAIT,QAmMzBwB,WAAYmI,QAGhB,eAACzH,EAAA,EAAKE,MAAN,WACE,8CACA,cAAC,EAAD,CACEhC,KAAK,mBACLC,MAAO4G,EACPtG,KAAMwG,EACNzG,sBA7NkB,SAACiK,GAC7B,IAAQvK,EAAgBuK,EAAhBvK,KAAMJ,EAAU2K,EAAV3K,MACD,oBAATI,GACF8G,EAAmBlH,GACL,KAAVA,GACFoH,EAAkB,IAEF,mBAAThH,GAEPgH,EADsB,KAApBH,EACgB,EAEAjH,YAuNlB,eAACkC,EAAA,EAAKC,MAAN,WACE,eAACD,EAAA,EAAKE,MAAN,CAAY0D,UAAQ,EAApB,UACE,uBAAOzD,MAAO,CAAEC,UAAW,QAA3B,0BACA,cAAC,EAAD,CACExB,kBAAmBpB,EAAMyJ,YAAYrI,kBACrCC,8BA3O0B,SAAC6J,GACrClL,EAAM4J,kBAAkB,oBAAqBsB,IA2OnC5J,mBAAoB0I,QAGxB,eAACxH,EAAA,EAAKE,MAAN,CAAYG,MAAO,EAAGuD,UAAQ,EAA9B,UACE,uBAAOzD,MAAO,CAAEC,UAAW,QAA3B,mBACA,cAACE,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,oBACLS,YAAY,cACZb,MAAO+G,EAAYD,kBACnBnE,MAAO,CACLC,QAASlD,EAAMyJ,YAAY0B,MAAM9K,WACjC8C,OAAO,EACPd,MAAO,SAETW,cAAc,QACdnC,SA7VoB,SAACuK,EAAaH,GAE5C,IAAM7D,EAAoB6D,EAAK3K,MAC/BgH,EAAe,CAAEF,kBAAmBA,IACpCY,GACEqB,GACErJ,EAAMyJ,YAAYrI,kBAClBgG,aA0VA,cAACpF,EAAD,CACEE,UAAuC,UAA5B6F,GACX9F,UAAW8F,KAEb,eAACvF,EAAA,EAAKC,MAAN,WAC2C,WAAxCzC,EAAMyJ,YAAYrI,mBACjB,cAACoB,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAnB,SACE,eAAC4D,EAAA,EAAD,CACE4E,MAAI,EACJ3E,OAAK,EACL1D,cAAc,OACd4D,QAnNY,SAAC9F,GACzBA,EAAEwK,iBAEF3C,IADkBD,IAElBP,GAAW,IACXG,GAAkB,IAClBD,GAAc,IACdD,GAAe,iBACfG,GAAe,KA4MHlG,MAAM,QALR,UAOE,cAACkJ,EAAA,EAAD,CAAM7K,KAAK,uBAPb,oBAYJ,cAAC8B,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAnB,SACE,eAAC4D,EAAA,EAAD,CACE4E,MAAI,EACJrI,cAAc,OACd4D,QAvPa,SAAC9F,GACxBA,EAAEwK,iBAEFzC,IADkBD,IAElBH,GAAU,CAAC,MAoPD/B,OAAK,EACLrE,MAAM,QALR,UAOE,cAACkJ,EAAA,EAAD,CAAM7K,KAAK,qBAPb,oBAaHgI,IACC,cAAC8C,EAAA,EAAD,UACE,cAACC,EAAD,CACErI,QAASA,GACTC,oBAvcgB,SAAC0F,EAAOkC,GAClC,IAAM7H,EAAU6H,EAAK3K,MACrB6H,GAAW/E,IAscDQ,YAAaA,GACbC,wBA7coB,SAAC,GAAe,IAAbvD,EAAY,EAAZA,MACjC8H,GAAe9H,IA6cLkD,eAAgBA,GAChBC,2BAjcuB,SAACsF,EAAOkC,GACzC,IAAMzH,EAAiByH,EAAK3K,MAC5BgI,GAAkB9E,IAgcRF,WAAYA,GACZC,uBAxcmB,SAACwF,EAAOkC,GACrC,IAAM3H,EAAa2H,EAAK3K,MACxB+H,GAAc/E,IAucJI,YAAaA,GACbC,wBAhcoB,SAACoF,EAAOkC,GACtC,IAAMvH,EAAcuH,EAAK3K,MACzBiI,GAAe7E,QAmcVkF,IACC,cAAC4C,EAAA,EAAD,UACGhD,GAAOxD,KAAI,SAAC0G,EAASxG,GACpB,OACE,eAAC1C,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,CAAYC,MAAO,CAAEC,UAAW,QAAUC,MAAM,KAAhD,SACE,cAACC,EAAA,EAAD,CACEpC,KAAK,QACLS,YAAY,iBACZN,SAAU,SAACoK,GACT,IAAIU,EAAS,YAAOnD,IACpBmD,EAAUzG,GAAS+F,EAAKjC,OAAO1I,MAC/BmI,GAAUkD,IAEZrL,MAAOoL,MAIVxG,IAAUsD,GAAO/D,OAAS,EACzB,cAACgC,EAAA,EAAD,CAAQ4E,MAAI,EAACO,UAAQ,EAAChF,QAAS,SAAC9F,GAAD,OA9R1B,SAACA,GACtBA,EAAEwK,iBACF,IAAIO,EAAS,YAAOrD,IACoB,KAApCqD,EAAUA,EAAUpH,OAAS,KAIjCoH,EAAU1L,KAAK,IACfsI,GAAUoD,IAsR4CC,CAAehL,IAArD,SACE,cAACyK,EAAA,EAAD,CAAM7K,KAAK,kBAGb,cAAC+F,EAAA,EAAD,CACE4E,MAAI,EACJO,UAAQ,EACRhF,QAAS,SAAC9F,GAAD,OA1RH,SAACA,EAAGiI,GAC5BjI,EAAEwK,iBACF,IAAMS,EAAYvD,GAAOwD,QAAO,SAACC,GAAD,OAAQA,IAAOlD,KAC/CN,GAAUsD,GAuRwBG,CAAkBpL,EAAG4K,IAHvC,SAKE,cAACH,EAAA,EAAD,CAAM7K,KAAK,qBAxBAwE,QAiCzB,cAAC1C,EAAA,EAAKE,MAAN,UACE,cAAC+D,EAAA,EAAD,CACEvD,QAAQ,sCACRH,KAAK,SACL2D,OAAK,EACL3E,UAAWkG,GACX5F,MAAM,QACNgJ,KAAK,aACLrI,cAAc,eAInBhD,EAAMyJ,YAAY0C,eACjB,eAACX,EAAA,EAAD,WACE,cAAC/E,EAAA,EAAD,CACEvD,QAAQ,cACRmI,KAAK,YACLzE,QAhVsB,WAC9B5G,EAAM4J,kBAAkB,gBAAgB,MAiVlC,cAACnD,EAAA,EAAD,CAAQvD,QAAQ,cAAcmI,KAAK,OAAOzE,QA9U3B,WACrB5G,EAAM4J,kBAAkB,YAAY,SAiVD,WAAhC5J,EAAMyJ,YAAYjI,WACjB,cAAC,EAAD,CACE2E,wBA7Q0B,SAAC4C,GACjC,KAAIA,EAAMC,OAAO,GAAG1I,MAAQ,KAAOyI,EAAMC,OAAO,GAAG1I,MAAQ,KAA3D,CAGA,IAAMsK,EAAW,CACfwB,gBAAiBrD,EAAMC,OAAO,GAAG1I,MACjC+L,gBAAiBtD,EAAMC,OAAO,GAAG1I,MACjCsB,IAAK5B,EAAMyJ,YAAN,KAEPzJ,EAAM4J,kBAAkB,8BAA8B,GACtD5J,EAAM4J,kBAAkB,kBAAmB,CACzCtD,eAAgByC,EAAMC,OAAO,GAAG1I,MAChCkG,eAAgBuC,EAAMC,OAAO,GAAG1I,QAElCN,EAAMsM,8BAA8B1B,KAgQ9BvE,qBA9SqB,SAAC0C,EAAOkC,GACnC,IAAMzE,EACJxG,EAAMyJ,YAAN,gCACI8C,EAAU,CACdH,gBAAiBnB,EAAK3K,MACtB+L,gBAAiB7F,GAEnBxG,EAAM4J,kBAAkB,kBAAmB2C,IAwSrChG,qBArSqB,SAACwC,EAAOkC,GACnC,IAEMsB,EAAU,CACdH,gBAFApM,EAAMyJ,YAAN,gCAGA4C,gBAAiBpB,EAAK3K,OAExBN,EAAM4J,kBAAkB,kBAAmB2C,IA+RrCjG,eAAgBtG,EAAMyJ,YAAY+C,gBAAgBJ,gBAClD5F,eAAgBxG,EAAMyJ,YAAY+C,gBAAgBH,gBAClDxF,wBA9RwB,WAC9B7G,EAAM4J,kBAAkB,sBAAuB,UA8RzCjD,+BA1RF3G,EAAMyJ,YAAY,uBAAuBgD,0B,gFCrRjD,SAASC,EAAoBC,ICvCA,SAACA,GAC5B,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAE3B,IAAIC,EAAeJ,EAAIK,UAElBD,EAAaE,MAAM,eACtBF,EAAeA,EAAaG,QAC1B,QACA,6CAIJ,IAAMC,EAAO,IAAIC,KAAK,CAACL,GAAe,CACpChK,KAAM,gCAGFsK,EAASC,OAAOC,KAAOD,OAAOE,WAAaF,OAC3CG,EAAUJ,EAAOK,gBAAgBP,GAEnCF,EAAQF,EAAaE,MAAM,kBACzBU,EAASV,GAASA,EAAM,GAAKW,SAASX,EAAM,GAAI,IAAM,IAEtDpK,GADNoK,EAAQF,EAAaE,MAAM,mBACJA,EAAM,GAAKW,SAASX,EAAM,GAAI,IAAM,IAErDY,EAASC,SAASC,cAAc,UACtCF,EAAOhL,MAAQA,EAAQ,EACvBgL,EAAOF,OAASA,EAAS,EACzB,IAAMK,EAAMH,EAAOI,WAAW,MAExBC,EAAQ,IAAIC,MAClBD,EAAME,OAAS,WACbJ,EAAIK,UAAUC,KAAM,EAAG,GAEvBjB,EAAOkB,gBAAgBd,GAEvBZ,EAAQgB,IAGVK,EAAMM,IAAMf,MDEdgB,CAAc9B,GAAK+B,MAAK,SAACC,GACRA,EExCRC,QAAO,SAAUzB,GACpB,IAAM0B,EAAO,IAAIvB,OAAOwB,cAAc,CAAE,YAAa3B,IACrD4B,UAAUC,UAAUC,MAAM,CAACJ,UF0CpBK,MAtCf,SAAmBlP,GACjB,IAAMmP,EAAYnP,EAAMmP,UAEpBC,EAAepP,EAAMqP,kBAMzB,MALwB,YAApBrP,EAAMsP,YAERF,EAAY,eAAMpP,EAAMoB,kBAAoBpB,EAAMqP,oBAIlD,gCACE,cAACE,EAAA,EAAD,CAAQC,OAAQL,EAAhB,SACE,cAACM,EAAA,EAAD,8BAEF,cAAC,IAAD,CACEjO,UAAWxB,EAAMwB,UACjBJ,kBAAmBpB,EAAMoB,kBACzBQ,IAAK5B,EAAM4B,IACX8N,MAAO,yBACPN,aAAcA,EACdO,sBAAuB3P,EAAM2P,sBAC7BC,MAAO5P,EAAM4P,MACbC,YAAU,EACVP,UAAWtP,EAAMsP,UACjBQ,cAAc,EACdpD,oBAAqBA,EACrBqD,eAAgB/P,EAAM+P,qBG9BxBC,EAAgB,SAAhBA,EAAiBC,GACnB,IAAMC,EAAY,GAYlB,OAXAD,EAASE,SAAQ,SAAClL,GACVmL,MAAMC,QAAQpL,GACdiL,EAAU/P,KAAK6P,EAAc/K,IAEN,kBAAZA,GAAoC,OAAZA,EAC/BiL,EAAU/P,KAAKmQ,EAAerL,IAE9BiL,EAAU/P,KAAK8E,MAIpBiL,GAGLI,EAAiB,SAAjBA,EAAkBC,GACpB,IAAMC,EAAa,GACnB,IAAK,IAAMpQ,KAAOmQ,EAAW,CACzB,IAAMjQ,EAAQiQ,EAAUnQ,GACpBgQ,MAAMC,QAAQ/P,GACdkQ,EAAWpQ,GAAO4P,EAAc1P,GAG5BkQ,EAAWpQ,GADM,kBAAVE,GAAgC,OAAVA,EACXgQ,EAAehQ,GAEfA,EAI9B,OAAOkQ,GAaIC,EAVE,SAACC,GACd,OAAIN,MAAMC,QAAQK,GACPV,EAAcU,GACG,kBAAVA,GAAgC,OAAVA,EAC7BJ,EAAeI,GAEfA,G,kBC1CFvF,EAAQ,SAAC/J,GAClB,MAA0B,WAAtBA,EACO,KAEe,WAAtBA,EACO,KAEe,QAAtBA,EACO,WAEe,QAAtBA,EACO,UADX,GCHW,SAASuP,EAAT,GAAqD,IAAhBtJ,EAAe,EAAfA,YAC5C/G,EAAQ+G,EAAYuJ,wBAAwBxJ,kBAC5ChG,EAAoBiG,EAAYuJ,wBAAwBtH,mBAC9D,OACE,eAACuH,EAAA,EAAMC,KAAP,WACGxQ,EADH,IACW6K,EAAM/J,MCTN,SAAS2P,EAAT,GAKX,IAJFC,EAIC,EAJDA,iBACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,UACAC,EACC,EADDA,oBAEMC,EAAeH,EACjBD,EAAiBK,sBAAsBC,QAAQ,GAC/CN,EAAiBO,uBAEfC,EAAmBP,EACrBD,EAAiBS,0BAA0BH,QAAQ,GACnDN,EAAiBU,2BACrB,OACE,eAACb,EAAA,EAAMC,KAAP,YACkB,cAAdI,GAA2C,SAAdA,IAC7B,4BAAIE,KAEU,kBAAdF,GAA+C,SAAdA,IACjC,mBAAGvO,MAAOwO,EAAV,SAAgCK,OClBzB,SAASG,EAAT,GAAoD,IAAhBtK,EAAe,EAAfA,YAC3CuK,EAAkB,IAAIvN,KAC1BgD,EAAYwK,kBAAkB3K,kBAC9B4K,mBAAmB,QAAS,CAC5B3N,KAAM,UACNF,MAAO,QACPC,IAAK,YAGP,OAAO,cAAC2M,EAAA,EAAMC,KAAP,UAAac,ICTP,SAASG,EAAT,GAIX,IAHFC,EAGC,EAHDA,oBACAd,EAEC,EAFDA,UACAC,EACC,EADDA,oBAEMc,EAAmBD,EAAoBE,kBACvCC,EAAuBH,EAAoBI,sBACjD,OACE,eAACvB,EAAA,EAAMC,KAAP,YACkB,cAAdI,GAA2C,SAAdA,IAC7B,4BAAIe,KAEU,kBAAdf,GAA+C,SAAdA,IACjC,mBAAGvO,MAAOwO,EAAV,SAAgCgB,OCbzB,SAASE,GAAT,GAIX,IAHFC,EAGC,EAHDA,eACApB,EAEC,EAFDA,UACAC,EACC,EADDA,oBAEMoB,EAAeC,KAAKC,MAAqC,IAA/BH,EAAeI,eAAwB,IACjEC,EACJH,KAAKC,MAAyC,IAAnCH,EAAeM,mBAA4B,IACxD,OACE,eAAC/B,EAAA,EAAMC,KAAP,YACkB,cAAdI,GAA2C,SAAdA,IAC7B,4BAAIqB,KAEU,kBAAdrB,GAA+C,SAAdA,IACjC,mBAAGvO,MAAOwO,EAAV,SAAgCwB,OCTjC,IAAME,GAAsB,SAAC,GAK7B,IAJLxL,EAII,EAJJA,YACA6J,EAGI,EAHJA,UACAD,EAEI,EAFJA,WACAE,EACI,EADJA,oBAEA,OACE,eAACN,EAAA,EAAMiC,IAAP,WACE,cAACnB,EAAD,CAA0BtK,YAAaA,IACvC,cAACsJ,EAAD,CAA2BtJ,YAAaA,IACxC,cAAC0J,EAAD,CACEC,iBAAkB3J,EAAYwK,kBAC9BZ,WAAYA,EACZC,UAAWA,EACXC,oBAAqBA,IAEvB,cAACY,EAAD,CACEC,oBAAqB3K,EAAY0L,8BACjC7B,UAAWA,EACXC,oBAAqBA,IAEvB,cAACkB,GAAD,CACEC,eAAgBjL,EAAY0L,8BAC5B7B,UAAWA,EACXC,oBAAqBA,QC5BhB6B,GAAmB,SAAC,GAK1B,IAHL/H,EAGI,EAHJA,KACAkG,EAEI,EAFJA,oBAGA,EAAkCpK,mBAAS,aAA3C,mBAAOmK,EAAP,KAAkB+B,EAAlB,KACA,EAAoClM,oBAAS,GAA7C,mBAAOkK,EAAP,KAAmBiC,EAAnB,KAEA,OACE,gCACE,cAAC1Q,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,MAAN,WACGwI,EAAKxG,OAAS,GACbwG,EAAK,GAAG4G,kBAAkBR,wBACxBpG,EAAK,GAAG4G,kBAAkBJ,2BAC1B,eAAChL,EAAA,EAAOhE,MAAR,WACE,cAACgE,EAAA,EAAD,CACEnG,MAAM,YACNkP,OAAsB,cAAd0B,EACRtK,QAAS,SAAC9F,EAAD,OAAMR,EAAN,EAAMA,MAAN,OAAkB2S,EAAa3S,IACxCqC,MAAO,CACLwQ,WAA0B,cAAdjC,EAA4B,OAAS,UALrD,uBAUA,cAACzK,EAAA,EAAD,CACEnG,MAAM,gBACNkP,OAAsB,kBAAd0B,EACRtK,QAAS,SAAC9F,EAAD,OAAMR,EAAN,EAAMA,MAAN,OAAkB2S,EAAa3S,IACxCqC,MAAK,aACHwQ,WACgB,kBAAdjC,EAAgC,OAAS,UACxCC,GAPP,2BAYA,cAAC1K,EAAA,EAAD,CACEnG,MAAM,OACNkP,OAAsB,SAAd0B,EACRtK,QAAS,SAAC9F,EAAD,OAAMR,EAAN,EAAMA,MAAN,OAAkB2S,EAAa3S,IACxCqC,MAAO,CACLwQ,WAA0B,SAAdjC,EAAuB,OAAS,UALhD,qBAYN,cAACkC,EAAA,EAAD,CACEC,QAAM,EACNxS,SAAU,kBAAMqS,GAAejC,IAC/BqC,QAAQ,EACRrQ,MAAM,eACNN,MAAO,CAAE4Q,WAAY,cAK3B,eAAC1C,EAAA,EAAD,CAAO1N,MAAM,OAAOqQ,QAAM,EAA1B,UACE,cAAC3C,EAAA,EAAM9K,OAAP,UACE,eAAC8K,EAAA,EAAMiC,IAAP,WACE,cAACjC,EAAA,EAAM4C,WAAP,kCACA,cAAC5C,EAAA,EAAM4C,WAAP,0BACA,cAAC5C,EAAA,EAAM4C,WAAP,kBACA,cAAC5C,EAAA,EAAM4C,WAAP,sBACA,cAAC5C,EAAA,EAAM4C,WAAP,uBAGJ,cAAC5C,EAAA,EAAM6C,KAAP,UACGzI,EAAKjG,KAAI,SAACqC,EAAanC,GACtB,OACE,cAAC,GAAD,CACEmC,YAAaA,EAEb6J,UAAWA,EACXD,WAAYA,EACZE,oBAAqBA,GAHhBjM,eC7ERyO,GAAiB,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,UAAWpS,EAAgB,EAAhBA,UAsBpCqS,EAAiB,CACrB,CACEC,SAAU,UACVC,gBAAiB,SACjB3T,IAAK,UACL6K,KAAM2I,EAAUpS,GAAWmM,OAC3B5L,SAAiD,IAAvC6R,EAAUpS,GAAWmM,OAAOlJ,QAExC,CACEqP,SAAU,UACVC,gBAAiB,SACjB3T,IAAK,UACL6K,KAAM2I,EAAUpS,GAAWwS,OAC3BjS,SAAiD,IAAvC6R,EAAUpS,GAAWwS,OAAOvP,QAExC,CACEqP,SAAU,OACVC,gBAAiB,MACjB3T,IAAK,OACL6K,KAAM2I,EAAUpS,GAAWyS,IAC3BlS,SAA8C,IAApC6R,EAAUpS,GAAWyS,IAAIxP,QAErC,CACEqP,SAAU,sBACVC,gBAAiB,MACjB3T,IAAK,sBACL6K,KAAM2I,EAAUpS,GAAW0S,IAC3BnS,SAA8C,IAApC6R,EAAUpS,GAAW0S,IAAIzP,SAIvC,EAA4BsC,mBAAS,GAArC,mBAAOoN,EAAP,KAAeC,EAAf,KAMA,IAAMjD,EAAsB,CAC1BkD,UAAW,SACXhS,MAAO,WAGHiS,EAAQT,EAAe7O,KAAI,SAACuP,EAASrP,GACzC,MAAO,CACL4O,SACE,cAACU,EAAA,EAAKC,KAAN,CAAW1S,SAAUwS,EAAQxS,SAA7B,SACGwS,EAAQT,UADiCS,EAAQR,iBAItDW,OAAQ,WACN,OACE,cAACC,EAAA,EAAIC,KAAL,CAAwCC,SAAS,MAAjD,SACE,cAAC,GAAD,CACEC,UAAWP,EAAQR,gBACnB9I,KAAMsJ,EAAQtJ,KACdkG,oBAAqBA,KAJVoD,EAAQR,sBAa/B,OACE,mCACE,cAACvI,EAAA,EAAD,UACE,cAACmJ,EAAA,EAAD,CAEEI,KAAM,CACJF,SAAU,MACVG,WAAW,EACXC,UAAU,GAEZX,MAAOA,EACPY,YAAaf,EACbgB,YAAa,SAACrU,EAAGqT,GA1CvBC,EA0CgED,EA1C5Ce,eAkCV,iB,UC5FDE,GAAa,SAAC,GAMpB,IALL1F,EAKI,EALJA,MACA2F,EAII,EAJJA,KACAC,EAGI,EAHJA,YACAC,EAEI,EAFJA,QACAC,EACI,EADJA,aAEMC,IAAaD,EACnB,OACE,eAACE,GAAA,EAAD,CAAOhG,MAAOA,EAAOiG,KAAMJ,EAASK,KAAK,QAAQC,eAAe,EAAhE,UACE,cAACH,GAAA,EAAM3P,OAAP,UAAe2J,IACf,cAACgG,GAAA,EAAMI,QAAP,UAAgBT,IAChB,eAACK,GAAA,EAAMK,QAAP,WACE,cAACtP,EAAA,EAAD,CAAQuP,UAAQ,EAACpP,QAAS0O,EAA1B,gBAGCG,GAAc,cAAChP,EAAA,EAAD,CAAQG,QAAS4O,EAAjB,2B,OCJRS,OAZf,SAA4BjW,GAC1B,OACE,cAACQ,EAAA,EAAD,CACEE,KAAK,WACLS,YAAY,OACZb,MAAON,EAAMkW,aACbrV,SAAUb,EAAMmW,yBAChBvV,QAASZ,EAAMoW,uBCeNC,GAxBA,SAACrW,GACd,OACE,sBAAK2C,MAAO,CAAEC,UAAW,QAAzB,UACE,wBAAOD,MAAO,CAAE2T,QAAS,QAAzB,UAAoCtW,EAAMuW,IAA1C,OAEA,uBACExT,KAAK,QACLwT,IAAKvW,EAAMuW,IACXC,IAAKxW,EAAMwW,IACXlW,MAAON,EAAMM,MACbmW,KAAMzW,EAAMyW,KACZC,UAAU,SACV7V,SAAU,SAACC,GAAD,OAAOd,EAAMa,SAASC,EAAEkI,OAAO1I,UAG3C,uBAAOqC,MAAO,CAAE2T,QAAS,QAAzB,SAAoCtW,EAAMwW,MAE1C,qBAAI7T,MAAO,CAAEgU,QAAS,UAAtB,UACG3W,EAAMiD,MADT,KACkBjD,EAAMM,MADxB,IACgCN,EAAM4W,aAAe,IAAM,aCZlDR,GANa,CACxB,CAAEhW,IAAK,IAAKE,MAAO,OAAQC,KAAM,OAAQwB,UAAU,GACnD,CAAE3B,IAAK,IAAKE,MAAO,QAASC,KAAM,QAASwB,UAAU,GACrD,CAAE3B,IAAK,IAAKE,MAAO,SAAUC,KAAM,SAAUwB,UAAU,GACvD,CAAE3B,IAAK,IAAKE,MAAO,QAASC,KAAM,QAASwB,UAAU,ICyX1C8U,GA3WY,SAAC7W,GAC1B,MAA0B+G,mBAAS,IAAnC,mBAAOpG,EAAP,KAAcmW,EAAd,KACA,EAAwB/P,mBAAS,GAAjC,mBAAO9F,EAAP,KAAa8V,EAAb,KACA,EAAsChQ,mBAAS,KAA/C,mBAAOiQ,EAAP,KAAoBC,EAApB,KACA,EAAkClQ,mBAAS,MAA3C,mBAAOmQ,EAAP,KAAkBC,EAAlB,KACA,EAAwCpQ,mBAAS,SAAjD,mBAAOmP,EAAP,KAAqBkB,EAArB,KACA,EAAgCrQ,mBAAS,KAAzC,mBAAOsQ,EAAP,KAAiBC,EAAjB,KACA,EAAkCvQ,oBAAS,GAA3C,mBAAOwQ,EAAP,KAAkBC,EAAlB,KACA,EAA0BzQ,mBAAS,KAAnC,mBAAO0Q,EAAP,KAAcC,EAAd,KACA,EAAkC3Q,oBAAS,GAA3C,mBAAO4Q,EAAP,KAAkBC,GAAlB,KACA,GAA0B7Q,mBAAS,GAAnC,qBAAO8Q,GAAP,MAAcC,GAAd,MACA,GAAgC/Q,mBAAS,KAAzC,qBAAOgR,GAAP,MAAiBC,GAAjB,MACA,GAAwCjR,mBAAS,IAAjD,qBAAOkR,GAAP,MAAqBC,GAArB,MAEMC,GAAuB,SAAC,GAC5B,GAAa,WAD4B,EAAXpV,KACP,CACrB,IAAMqV,EAAS,CACb9O,mBAAoBtJ,EAAMyJ,YAAYrI,kBACtCQ,IAAK5B,EAAMyJ,YAAY7H,IACvByW,wBAAyBrB,EACzBsB,QAASpB,EACT3P,gBAAiB5G,EACjB8G,eAAgBxG,EAChBsX,0BAA2BrC,EAC3BsC,4BAA6BnB,EAC7BoB,UAAWV,GACXF,MAAOF,EACPe,YAAajB,EACbA,MAAOF,EACPoB,YAAad,GACbrW,UAAWxB,EAAMyJ,YAAYjI,WAE/BxB,EAAM4Y,wBAAwBR,QAE9BpY,EAAM4J,kBAAkB,gBAAgB,IA+BtCiP,GAA0B,SAAC/X,EAAD,GAAyB,IAAnBJ,EAAkB,EAAlBA,KAAMJ,EAAY,EAAZA,MAC7B,cAATI,GACFuW,EAAe3W,GAEJ,YAATI,GACFyW,EAAa7W,GAEF,mBAATI,GACF4W,EAAYhX,GAED,aAATI,GACFsX,GAAY1X,IAwBVuJ,GAAc,SAACC,GACnB,IAAMC,EAAc/J,EAAMyJ,YAAY1H,SAAS+H,EAAO1J,KACtD,OAAO,2BAAK0J,GAAZ,IAAoB/H,SAAUgI,KAG1BC,GAA4B1I,EAAmB0D,IAAI6E,IAEnDI,GAAoBnI,EAAWkD,IAAI6E,IA6EzC,OAzBAN,qBAAU,WACR,QAAQ,GACN,KAAKnE,OAAO4R,GAAe,EACzBkB,GAAgB,iCAChB,MACF,KAAK9S,OAAO8R,GAAa,GACvBgB,GAAgB,gCAChB,MACF,KAAK9S,OAAOC,MAAMD,OAAO4R,IACzB,KAAK5R,OAAOC,MAAMD,OAAO8R,IACzB,KAAK9R,OAAOC,MAAMD,OAAOiS,IACzB,KAAKjS,OAAOC,MAAMD,OAAO2S,KACvBG,GAAgB,qDAChB,MACF,IAAqB,KAAhBlB,EACL,IAAmB,KAAdE,EACL,IAAkB,KAAbG,EACL,IAAkB,KAAbU,GACHG,GAAgB,gDAChB,MACF,QACEA,GAAgB,OAEnB,CAAClB,EAAaE,EAAWG,EAAUU,KAGpC,gCACE,eAACvV,EAAA,EAAD,CAAM0D,SAAUiS,GAAhB,UACE,cAAC3V,EAAA,EAAKE,MAAN,UACE,cAAC,EAAD,CACEjB,sBAvJoB,SAACV,GAC7Bf,EAAM4J,kBAAkB,YAAa7I,EAAIT,QAuJjCkB,UAAWxB,EAAMyJ,YAAYjI,UAC7BE,iBAAkBA,MAGtB,cAACc,EAAA,EAAKE,MAAN,UACE,cAAC,EAAD,CACErB,8BA1J4B,SAACN,GACrCf,EAAM4J,kBAAkB,oBAAqB7I,IA0JrCK,kBAAmBpB,EAAMyJ,YAAYrI,kBACrCE,mBAAoB0I,OAGxB,cAACxH,EAAA,EAAKE,MAAN,UACE,cAAC,EAAD,CACEb,gBA7Jc,SAACd,GACvBf,EAAM4J,kBAAkB,MAAO7I,EAAIT,QA6J3BsB,IAAK5B,EAAMyJ,YAAY7H,IACvBE,WAAYmI,OAGhB,cAACzH,EAAA,EAAKE,MAAN,UACE,cAAC,EAAD,CACE1B,sBAhKoB,SAAC,GAAqB,IAAnBN,EAAkB,EAAlBA,KAAMJ,EAAY,EAAZA,MACxB,oBAATI,GACFoW,EAASxW,GACK,KAAVA,GACFyW,EAAQ,IAEQ,mBAATrW,GAEPqW,EADY,KAAVpW,EACM,EAEAL,IAuJJK,MAAOA,EACPM,KAAMA,MAGV,cAAC8E,EAAA,EAAD,CAAQC,GAAG,KAAKpD,UAAW,OAA3B,kBAGA,cAACJ,EAAA,EAAKE,MAAN,UACE,cAACI,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,YACLS,YAAY,uBACZb,MAAO0W,EACP/T,MAAO,CACLC,QAAS,QACTC,OAAO,EACPd,MAAO,SAETW,cAAc,QACdnC,SAAUgY,OAGd,cAACrW,EAAA,EAAKE,MAAN,UACE,cAACI,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,UACLS,YAAY,qBACZb,MAAO4W,EACPjU,MAAO,CACLC,QAAS,QACTC,OAAO,EACPd,MAAO,SAETW,cAAc,QACdnC,SAAUgY,OAGd,cAAC9S,EAAA,EAAD,CAAQC,GAAG,KAAKpD,UAAW,OAA3B,uBAGA,cAACJ,EAAA,EAAKE,MAAN,UACE,cAAC,GAAD,CACEyT,yBA7KuB,SAACrV,EAAD,GAAmB,IAAbR,EAAY,EAAZA,MACrC8W,EAAgB9W,IA6KR4V,aAAcA,EACdE,oBAAqB0C,OAGzB,cAACtW,EAAA,EAAKE,MAAN,UACE,cAACI,EAAA,EAAD,CACEC,KAAK,UACLrC,KAAK,iBACLS,YAAY,kBACZb,MAAO+W,EACPxW,SAAUgY,OAGd,cAAC9S,EAAA,EAAD,CAAQC,GAAG,KAAKpD,UAAW,OAA3B,4CAGA,cAACJ,EAAA,EAAKE,MAAN,UACE,cAACF,EAAA,EAAKM,MAAN,CACEG,MAAM,eACNF,KAAK,UACLrC,KAAK,WACLS,YAAY,MACZb,MAAOyX,GACP/U,cAAc,OACdnC,SAAUgY,OAGd,cAAC7W,EAAD,CAAWC,UAAWgW,KACtB,cAACzV,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAIF,MAAO,CAAEC,UAAW,QAA3C,SACE,cAACwQ,EAAA,EAAD,CACEC,QAAM,EACNpQ,MAAM,iBACNpC,SA1MmB,SAACC,EAAD,GAAqB,IAAfiY,EAAc,EAAdA,QACjCvB,EAAauB,QA4MRxB,GACC,cAAC/U,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAnB,SACE,cAAC,GAAD,CACE+T,cAAc,EACdL,KAAM,EACNC,IAAK,EACLlW,MAAOmX,EACPhB,KAAM,IACN5V,SAjNc,SAACE,GACzB2W,EAAS3W,IAiNCkC,MAAM,YAMZ,cAACT,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAIF,MAAO,CAAEC,UAAW,QAA3C,SACE,cAACwQ,EAAA,EAAD,CACEC,QAAM,EACNpQ,MAAM,8BACNpC,SApNc,SAACC,EAAD,GAAqB,IAAfiY,EAAc,EAAdA,QAC5BnB,GAAamB,QAsNRpB,GACC,cAACnV,EAAA,EAAKE,MAAN,CAAYG,MAAO,GAAnB,SACE,cAAC,GAAD,CACE+T,cAAc,EACdL,IAAK,EACLC,IAAK,GACLlW,MAAOuX,GACPpB,KAAM,GACN5V,SAnOc,SAACE,GACzB+W,GAAS/W,IAmOCkC,MAAM,uBAIZ,cAACT,EAAA,EAAKE,MAAN,UACE,cAAC+D,EAAA,EAAD,CACEvD,QAAQ,uBACRH,KAAK,SACL2D,OAAK,EACLrE,MAAM,QACNgJ,KAAK,aACLrI,cAAc,QACdjB,SAA2B,KAAjBkW,OAGbjY,EAAMyJ,YAAY0C,eACjB,cAAC3J,EAAA,EAAKE,MAAN,UACE,cAAC+D,EAAA,EAAD,CACEvD,QAAQ,cACRmI,KAAK,YACLzE,QAASuR,GACTxV,MAAO,CAAEE,MAAO,QAChBE,KAAK,eAMoB,WAAhC/C,EAAMyJ,YAAYjI,WACjB,cAAC,EAAD,CACE2E,wBAjN0B,SAAC4C,GACjC,KAAIA,EAAMC,OAAO,GAAG1I,MAAQ,KAAOyI,EAAMC,OAAO,GAAG1I,MAAQ,KAA3D,CAGA,IAAMsK,EAAW,CACfwB,gBAAiBrD,EAAMC,OAAO,GAAG1I,MACjC+L,gBAAiBtD,EAAMC,OAAO,GAAG1I,MACjCsB,IAAK5B,EAAMyJ,YAAN,KAEPzJ,EAAM4J,kBAAkB,8BAA8B,GACtD5J,EAAM4J,kBAAkB,kBAAmB,CACzCtD,eAAgByC,EAAMC,OAAO,GAAG1I,MAChCkG,eAAgBuC,EAAMC,OAAO,GAAG1I,QAElC0Y,QAAQC,IAAIjZ,GACZA,EAAMsM,8BAA8B1B,KAmM9BvE,qBAlPqB,SAAC0C,EAAOkC,GACnC,IAAMzE,EACJxG,EAAMyJ,YAAN,gCACI8C,EAAU,CACdH,gBAAiBnB,EAAK3K,MACtB+L,gBAAiB7F,GAEnBxG,EAAM4J,kBAAkB,kBAAmB2C,IA4OrChG,qBAzOqB,SAACwC,EAAOkC,GACnC,IAEMsB,EAAU,CACdH,gBAFApM,EAAMyJ,YAAN,gCAGA4C,gBAAiBpB,EAAK3K,OAExBN,EAAM4J,kBAAkB,kBAAmB2C,IAmOrCjG,eAAgBtG,EAAMyJ,YAAY+C,gBAAgBJ,gBAClD5F,eAAgBxG,EAAMyJ,YAAY+C,gBAAgBH,gBAClDxF,wBAlOwB,WAC9B7G,EAAM4J,kBAAkB,sBAAuB,UAkOzCjD,+BA9NF3G,EAAMyJ,YAAY,uBAAuBgD,0B,mDCnJ3CyM,GAAY,yCAAG,WAAOC,EAAiB3X,EAAW4X,GAAnC,sBAAAC,EAAA,6DAWfC,EAXe,UAQbC,EAAWC,kDARE,YAWMhY,EAXN,YAWmB4X,GACzB,wBAATA,IACFE,EAAG,UAAMC,EAAN,sBAA4BH,IAG3BK,EACF,CACE,eAAgB,mBAChB,mBAAoBD,oCAnBP,SAsBIE,KAAM,CAC3BJ,IAAKA,EACLrO,KAAMkO,EACNQ,OAAQ,OACRF,YA1BiB,cAsBbG,EAtBa,yBAmDZA,EAAS3O,MAnDG,2CAAH,0DAsDZ4O,GAAmB,WACvB,IAWMzK,EAAe,CACnB0K,OAAQ,CACNnM,OAAQ,GACRqG,OAAQ,GACRC,IAAK,GACLC,IAAK,IAEP,aAAc,CACZvG,OAAQ,GACRqG,OAAQ,GACRC,IAAK,GACLC,IAAK,IAEP,SAAU,CACRvG,OAAQ,GACRqG,OAAQ,GACRC,IAAK,GACLC,IAAK,GACL1H,gBAAiB,CACfJ,gBAAiB,KACjBC,gBAAiB,KACjBzK,IAAK,MAEPmY,mBAlCuB,CACzBtN,oBAAqB,KACrBuN,wBAAyB,KACzBC,4BAA6B,KAC7BC,iCAAkC,KAClCC,uCAAwC,KACxCC,uCAAwC,KACxCC,gCAAiC,KACjCC,gCAAiC,QA8BnC,MAAO,CACLC,YAAa,CACX7J,MAAOtB,EACPoL,OAAQpL,GAEV,uBAAwB,CACtBsB,MAAOtB,EACPoL,OAAQpL,GAEVqL,OAAQ,CAAEA,QAAQ,EAAOC,QAAS,IAClCvL,WAAW,EACXwL,0BAA0B,IA4LfC,GAxLK,SAACxZ,EAAmBI,GAAqC,IAA1B4X,EAAyB,uDAAlB,cACxD,EAAgCrS,mBAAS8S,IAAzC,mBAAOgB,EAAP,KAAiBC,EAAjB,KACMC,EAAcC,uBAClB,SAACC,GACCH,GAAY,SAACI,GACX,IAAIC,EAAU1K,EAASyK,GAQvB,OAPID,EAAS7O,iBAAmB6O,EAAS5O,iBACvC8O,EAAQ/B,GAAM1I,MAAMlP,GAApB,gBAAoDyZ,EACpDE,EAAQR,0BAA2B,GAEnCQ,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAAmBjB,KAAK8a,GAEzDE,EAAQhM,WAAY,EACbgM,OAGX,CAAC/Z,EAAmBgY,EAAM5X,IAQtB4Z,EAAuBJ,uBAC3B,SAACK,GAA4B,IAAlBC,EAAiB,wDACpBL,EAAWxK,EACf4K,EAASjC,GAAM1I,MAAMlP,GAAWJ,IAElC6Z,EAASM,MACT,IAAIC,EAAY,KAKhB,OAJIF,IACFE,EAAYH,EAASjC,GAAMoB,OAAOhZ,GAAWJ,IACnCma,MAEL,CAAEN,WAAUO,eAErB,CAACpa,EAAmBgY,EAAM5X,IAItBia,EAAuBT,uBAC3B,SAACM,GACCR,GAAY,SAACI,GACX,IAAMC,EAAU1K,EAASyK,GACzB,EAAgCE,EAAqBF,EAAKI,GAAlDL,EAAR,EAAQA,SAAUO,EAAlB,EAAkBA,UAKlB,OAJAL,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAAqB6Z,EAChDO,IACFL,EAAQ/B,GAAMoB,OAAOhZ,GAAWJ,GAAqBoa,GAEhDL,OAGX,CAACL,EAAaM,EAAsBhC,EAAM5X,EAAWJ,IAGjDsa,EAAwBV,uBAAY,WACxCF,GAAY,SAACI,GACX,IAAMC,EAAU1K,EAASyK,GAGzB,OAFAC,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAAqB,GACpD+Z,EAAQ/B,GAAMoB,OAAOhZ,GAAWJ,GAAqB,GAC9C+Z,OAER,CAAC/Z,EAAmBgY,EAAM5X,IAEvBma,EAAiBX,uBAAY,WACjCF,GAAY,SAACI,GACX,IAAMC,EAAU1K,EAASyK,GAEzB,OADAC,EAAQV,OAAS,CAAEA,QAAQ,EAAOC,QAAS,IACpCS,OAER,IAqGH,OAnGA5R,qBAAU,WACR,IAEMqS,EACAC,EAHFC,GAAS,EACTjB,EAAS1L,YAIP0L,EAAQ,yBACVgB,EAAchB,EAASzB,GAAM1I,MAAMlP,GAArB,iBAEdoa,EAAgBf,EAASzB,GAAM1I,MAAMlP,GAAWJ,GAChDya,EAAcpL,EAASmL,EAAcA,EAAcnX,OAAS,KAG9DyU,GACE2C,EACAra,EACAqZ,EAAQ,yBAA+B,sBAAwBzB,GAE9D1K,MAAK,SAACC,GACAmN,GACHhB,GAAY,SAACI,GACX,IAAMC,EAAU1K,EAASyK,GACrBa,EAAmB,GACnBC,EAAgB,KACpB,GAAIb,EAAQR,yBASV,OARAQ,EAAQV,OAAS,CACfA,QAAQ,EACRC,QAAS,WAEXS,EAAQ/B,GAAM1I,MAAMlP,GAApB,gBAAoDqa,EACpDV,EAAQ/B,GAAMoB,OAAOhZ,GAArB,mBAAwDmN,EACxDwM,EAAQhM,WAAY,EACpBgM,EAAQR,0BAA2B,EAC5BQ,EAEI,yBAAT/B,IACF4C,EAAgBrN,GAEL,gBAATyK,IACF4C,EAAgBb,EAAQ/B,GAAMoB,OAAOhZ,GACnCJ,GACA6a,OAAO,CAACtN,KArBO,oBAuBQqN,GAvBR,IAuBnB,2BAA0C,CAAC,IAAhCE,EAA+B,QASxC,GARIF,EAAcvX,OAAS,IAEzBsX,EACEG,EAAanJ,8BACVoJ,6BACHD,EAAanJ,8BACVqJ,iCAEHL,EAAkB,CACpB,GAAa,yBAAT3C,EACF+B,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAAqB,OAC/C,CACL,IAAQ6Z,EAAaG,EAAqBF,GAAlCD,SACRE,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAC7B6Z,EAOJ,OALAE,EAAQV,OAAS,CACfA,QAAQ,EACRC,QAAQ,2DAAD,OAA6DqB,IAEtEZ,EAAQhM,WAAY,EACbgM,IA7CQ,8BAuDnB,OAPAA,EAAQ/B,GAAMoB,OAAOhZ,GAAWJ,GAC9B4a,EACFb,EAAQV,OAAS,CACfA,QAAQ,EACRC,QAAS,WAEXS,EAAQhM,WAAY,EACbgM,QAIZkB,OAAM,SAAC1X,GACNmW,GAAY,SAACI,GACX,IAAMC,EAAU1K,EAASyK,GACjBD,EAAaG,EAAqBF,GAAlCD,SACRE,EAAQ/B,GAAM1I,MAAMlP,GAAWJ,GAAqB6Z,EACpD,IAAMqB,EAAY,uFAAmF3X,EAAM+V,SAM3G,OALAS,EAAQV,OAAS,CACfA,QAAQ,EACRC,QAAS4B,GAEXnB,EAAQhM,WAAY,EACbgM,SAIf,OAAO,WACLW,GAAS,KAEV,CAACjB,EAAUzZ,EAAmBgY,EAAM5X,EAAW4Z,IAE3C,CACLL,cACAU,uBACAC,wBACAC,iBACAvM,aAAcyL,EAASzB,GAAM1I,MAC7B6L,QAAS1B,EAASzB,GAAMoB,OACxBgC,UAAW3B,EAASJ,OACpBtL,UAAW0L,EAAS1L,YCjSlBsN,GAAkB,WACpB,MAAO,CACHrD,KAAM,cACNsD,gBAAiB,EACjBlb,UAAW,SACXJ,kBAAmB,SACnB+J,MAAO,KACPwR,6BAA8B,EAC9B/a,IAAK,OACL4K,gBAAiB,CACbJ,gBAAiB,KACjBC,gBAAiB,MAErB,sBAAuB,CACnBI,oBAAqB,KACrBuN,wBAAyB,KACzBC,4BAA6B,KAC7BC,iCAAkC,KAClCC,uCAAwC,KACxCC,uCAAwC,KACxCC,gCAAiC,KACjCC,gCAAiC,MAErCvY,SAAU,CACN4L,QAAQ,EACRqG,QAAQ,EACRC,KAAK,EACLC,KAAK,EACL0I,MAAM,EACNC,QAAQ,GAEZpC,OAAQ,CACJA,QAAQ,EACRC,QAAS,IAEbhR,kBAAkB,EAClBoT,cAAc,EACdC,UAAU,EACV5Q,eAAe,IAIjB6Q,GAAqC,CACvC,SACA,SACA,MACA,MACA,OAgJWC,GA7IQ,WACnB,MAAsClW,mBAAS0V,IAA/C,mBAAOhT,EAAP,KAAoByT,EAApB,KAsIA,MAAO,CACHzT,cACA0T,uBAvI2BnC,uBAAY,SAACuB,GACxC,OAAO,SAAC7b,EAAM0c,GACVF,GAAe,SAAChC,GACZ,IAAMC,EAAU1K,EAASyK,GACzB,OAAQxa,GACJ,IAAK,OACDya,EAAQ/B,KAAOgE,EACfjC,EAAQuB,gBACS,gBAAbU,EAA6B,EAAI,EACrC,MACJ,IAAK,kBAED,OADAjC,EAAQuB,gBAAkBU,EAClBA,GACJ,KAAK,EAML,QACIjC,EAAQ/B,KAAO,cACf,MALJ,KAAK,EACD+B,EAAQ/B,KAAO,uBAMvB,MACJ,IAAK,YACD+B,EAAQ3Z,UAAY4b,EACH,WAAbA,GACAjC,EAAQpZ,SAAW,CACf4L,QAAQ,EACRqG,QAAQ,EACRC,KAAK,EACLC,KAAK,EACL0I,MAAM,EACNC,QAAQ,GAEZ1B,EAAQ/Z,kBAAoB,SAC5B+Z,EAAQwB,6BAA+B,EACvCxB,EAAQvZ,IAAM,WAGV2a,EAAQa,GAAUjC,EAAQ/Z,mBACrBqD,OAAS,GACd8X,EAAQa,GAAUjC,EAAQ/Z,mBAAmB,GACxCic,WAAWzb,MAAQuZ,EAAQvZ,MAEhCuZ,EAAQvZ,IACJ2a,EAAQa,GACJjC,EAAQ/Z,mBACV,GAAGic,WAAWzb,KAExBuZ,EAAQpZ,SAAW,CACf4L,QAAQ,EACRqG,QAAQ,EACRC,KAAK,EACLC,KAAK,EACL0I,MAAM,EACNC,QAAQ,IAGhB,MACJ,IAAK,oBACD1B,EAAQ/Z,kBAAoBgc,EAC5BjC,EAAQhQ,MAAQA,EAAMiS,GACtB,IACI,IAAIE,EAAI,EACRA,EAAIN,GAAmCvY,OACvC6Y,IAEA,GACIN,GAAmCM,KACnCF,EACF,CACEjC,EAAQwB,6BAA+BW,EACvC,MAGR,MACJ,IAAK,+BACD,IAAMC,EACFP,GAAmCI,GAEb,WAAtBjC,EAAQ3Z,WACkB,WAA1B+b,EAEApC,EAAQV,OAAS,CACbA,QAAQ,EACRC,QAAS,sCAGbS,EAAQwB,6BAA+BS,EACvCjC,EAAQ/Z,kBACJ4b,GAAmCI,IAE3C,MACJ,IAAK,MACD,IAAMI,EAAe,YACdjB,EAAQpB,EAAQ3Z,WACf2Z,EAAQ/Z,oBAGhB,GAAIoc,EAAgB/Y,OAAS,EAAG,CAAC,IAAD,gBACJ+Y,GADI,IAC5B,2BAAyC,CAAC,IAA/BC,EAA8B,QACrC,GAAIL,IAAaK,EAAU7b,IAAK,CAC5BuZ,EAAQV,OAAS,CACbA,QAAQ,EACRC,QAAS,wBAEb,QAPoB,+BAW3BS,EAAQV,OAAOC,UAChBS,EAAQvZ,IAAMwb,GAElB,MAYJ,QACIjC,EAAQza,GAAQ0c,EAExB,OAAOjC,QAGhB,MCiSP,IAAMtH,GAAiB,CACrB,CACEC,SAAU,SACVC,gBAAiB,SACjB3T,IAAK,UAEP,CACE0T,SAAU,SACVC,gBAAiB,SACjB3T,IAAK,UAEP,CACE0T,SAAU,MACVC,gBAAiB,MACjB3T,IAAK,OAEP,CACE0T,SAAU,qBACVC,gBAAiB,MACjB3T,IAAK,uBAIHsd,GAAe,CACnB,CAAEtd,IAAK,aAAcE,MAAO,aAAcC,KAAM,cAChD,CAAEH,IAAK,cAAeE,MAAO,cAAeC,KAAM,eAClD,CAAEH,IAAK,UAAWE,MAAO,UAAWC,KAAM,YAC1C,CAAEH,IAAK,UAAWE,MAAO,UAAWC,KAAM,YAC1C,CAAEH,IAAK,UAAWE,MAAO,UAAWC,KAAM,aAa7Bod,OAnef,WAKE,MAA8B5W,oBAAS,GAAvC,mBAAO6W,EAAP,KAAgBC,EAAhB,KAIA,EAA0B9W,mBAAS,CACjCzG,MAAO,aACPC,KAAM,eAFR,mBAAOqP,EAAP,KAAckO,EAAd,KAKA,EAAwB/W,oBAAS,GAAjC,mBAAOgX,EAAP,KAAaC,EAAb,KACA,EAAoCjX,mBA2c7B,CACLwO,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,OAhdhB,mBAAOyI,EAAP,KAAmBC,EAAnB,KACA,EAAgDjB,KAAxCxT,EAAR,EAAQA,YAAa0T,EAArB,EAAqBA,uBACrB,EAAkCpW,oBAAS,GAA3C,mBAAOoX,EAAP,KAAkBC,EAAlB,KAGEhF,EAUE3P,EAVF2P,KACAsD,EASEjT,EATFiT,gBACAlb,EAQEiI,EARFjI,UACAJ,EAOEqI,EAPFrI,kBACAub,EAMElT,EANFkT,6BACA/a,EAKE6H,EALF7H,IACAG,EAIE0H,EAJF1H,SACA0Y,EAGEhR,EAHFgR,OACAqC,EAEErT,EAFFqT,aACAC,EACEtT,EADFsT,SAGF,EASInC,GAAYxZ,EAAmBI,EAAW4X,GAR5C2B,EADF,EACEA,YACAU,EAFF,EAEEA,qBACAC,EAHF,EAGEA,sBACAC,EAJF,EAIEA,eACAvM,EALF,EAKEA,aACAmN,GANF,EAMEA,QACAC,GAPF,EAOEA,UACArN,GARF,EAQEA,UAGIvF,GAAoByU,mBACxB,kBAAMlB,EAAuBZ,MAC7B,CAACA,GAASY,IAGZ5T,qBAAU,WAeR,GAdIiT,GAAU/B,OACZyD,EAAc,CACZ3I,SAAS,EACT7F,MAAO,iBACP2F,KAAMmH,GAAU9B,QAChBpF,YAAa,WACXqG,IACAuC,EAkaD,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,UApamB,YAAtBgH,GAAU9B,UACnB9Q,GAAkB,oBAAoB,GACtC+R,KAEElB,EAAOA,OAAQ,CACjB,IAAIpF,EAAO,qDACY,yBAAnBoF,EAAOC,UACTrF,EACE,gJAEJ6I,EAAc,CACZ3I,SAAS,EACT7F,MAAO+K,EAAOC,QACdrF,KAAMA,EACNC,YAAa,kBAAM4I,EAiZlB,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,UApZZ5L,GAAkB,SAAU,CAAE6Q,QAAQ,EAAOC,QAAS,QAEvD,CAACD,EAAQ+B,GAAWb,EAAgB/R,KAuBvCL,qBAAU,WACJgT,GAAQ/a,GAAWJ,GAAmBqD,OAAS,EACjDmF,GAAkB,iBAAiB,GAEnCA,GAAkB,iBAAiB,KAEpC,CAAC2S,GAAS/a,EAAWJ,EAAmBwI,KAEvCkT,IACFoB,EAAc,CACZ3I,SAAS,EACT7F,MAAO,kCACP2F,KAAM,4DACNG,aAAc,kBAAM0I,EAyWjB,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,QA7WZF,YAAa,WACXoG,IACAwC,EAsWC,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,OA1WV5L,GAAkB,sBAAuB,YAG7CA,GAAkB,gBAAgB,IAGhCmT,IACFmB,EAAc,CACZ3I,SAAS,EACT7F,MAAO,wDACP2F,KAAM,8DACNG,aAAc,kBAAM0I,EA0VjB,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,QA9VZF,YAAa,WACXmG,GAAqB,GACrByC,EAuVC,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,UAzVd5L,GAAkB,YAAY,IAGhC,IAAM0U,GAAkB,SAACxd,EAAD,GAAyB,IAAnBoU,EAAkB,EAAlBA,YAC5BtL,GAAkB,+BAAgCsL,IAO9C0D,GAA0B,SAAChO,GAE/BA,EAAS+N,YAAc/N,EAAS+N,YAAc,IAC9CoC,EAAYnQ,IAGRzE,GAA0B,SAACyE,GAG/B,OADAmQ,EAAYnQ,KACRuE,IAOAoP,GAAoB,SAACxV,EAAD,GAAuB,IAAbzI,EAAY,EAAZA,MAI5BC,EADiBmd,GAAac,MAAK,SAACC,GAAD,OAAOA,EAAEre,MAAQE,KAC/B,KAE3Bwd,EAAS,CAAExd,MAAOA,EAAOC,KAAMA,KAW3Bme,GAAgB,SAACC,GAIrB,IAAKxP,GAAW,CACd,IAAMqO,EAAkB/M,EACtBrB,EAAa5N,GAAWJ,IAEtBwd,EAAc,GAClB,GAAIpB,EAAgB/Y,OAAS,EAAG,CAC9B,IAD8B,EACxBoa,EAC2B,EAA/BF,EAAapX,gBAAsBoX,EAAalX,eAC5CqX,EAAY,GAHY,cAINtB,GAJM,IAI9B,2BAAyC,CAAC,IAA/BC,EAA8B,QACvC,GAAIsB,KAAKC,UAAUvB,KAAesB,KAAKC,UAAUL,GAAe,CAC9DC,EAAc,YACd,MAEF,IAAMK,EACwB,EAA5BxB,EAAUlW,gBAAsBkW,EAAUhW,eAU5C,GATIgW,EAAU7b,MAAQ+c,EAAa/c,KACjCkd,EAAU3e,KAAK,mBAEbsd,EAAUzW,aAAe2X,EAAa3X,YACxC8X,EAAU3e,KAAK,4BAEb8e,IAAiBJ,GACnBC,EAAU3e,KAAK,wBAEb2e,EAAUra,OAAS,EAAG,CACxBma,EAAcE,EAAU,GACC,IAArBA,EAAUra,OACZma,EAAcE,EAAUpa,KAAK,SACC,IAArBoa,EAAUra,SACnBma,EAAW,UAAME,EAAU,GAAhB,aAAuBA,EAAU,GAAjC,gBAA2CA,EAAU,KAElE,QA3B0B,+BA+BhC,OAAIF,GAEAV,EADkB,cAAhBU,EACY,CACZrJ,SAAS,EACT7F,MAAO,oBACP2F,KAAK,0GACLC,YAAa,kBAAM4I,EA0PtB,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,SA5PM,CACZD,SAAS,EACT7F,MAAO,uBACP2F,KAAK,wEAAD,OAA0EuJ,EAA1E,mBACJtJ,YAAa,kBAAM4I,EAmPtB,CACL3I,SAAS,EACT7F,MAAO,GACP2F,KAAM,GACNC,YAAa,KACbE,aAAc,WArPH,IAEPuF,EAAY4D,IACL,KAKPrK,GAAQT,GAAe7O,KAAI,SAACuP,EAASrP,GACzC,MAAO,CACL4O,SAAUS,EAAQT,SAClBY,OAAQ,WACN,OAAOkJ,EACL,cAACjJ,EAAA,EAAIC,KAAL,CAEEC,SAAS,MACT9S,SAAUA,EAASwS,EAAQR,iBAH7B,SAKE,cAACmL,EAAD,CAEE1d,UAAWA,EACXI,IAAKA,EACLR,kBAAmBmT,EAAQR,gBAC3B1E,kBAAmBkN,GAAQ/a,GAAW+S,EAAQR,iBAC9CpE,sBAAuB4M,GAAQ/a,GAAR,mBACvBoO,MAAOA,EAAMtP,MACb6O,UAAWA,GACXG,UAAU,UACVS,eAAgBoO,GAVlB,kBACkBjZ,KALd,UAkBN,cAACyP,EAAA,EAAIC,KAAL,CAAUC,SAAS,MAAnB,SACE,cAACqK,EAAD,CAEE1d,UAAWA,EACXI,IAAKA,EACLR,kBAAmBmT,EAAQR,gBAC3B1E,kBAAmBkN,GAAQ/a,GAC3BmO,sBAAuB4M,GAAQ/a,GAAR,mBACvBoO,MAAOA,EAAMtP,MACb6O,UAAWA,GACXG,UAAU,OATZ,cACcpK,KAFa,YAkB/Bia,GAAW,kBACf,cAACxK,EAAA,EAAD,CAEEI,KAAM,CACJF,SAAU,MACVG,WAAW,EACXC,UAAU,GAEZX,MAAOA,GACPY,YAAayH,EACbxH,YAAamJ,IART,aAYFc,GAAY,CAChB,CACEhf,IAAK,eACL0T,SAAU,eACVY,OAAQ,kBACN,cAACC,EAAA,EAAIC,KAAL,CAAUC,UAAU,EAApB,SACE,cAAC,EAAD,CACE9J,wBAAyB2T,GACzBjV,YAAaA,EACbG,kBAAmBA,GACnB8M,UAAU,mBACVpK,8BAA+BnG,MANJ,kBAYnC,CACE/F,IAAK,WACL0T,SAAU,WACVY,OAAQ,kBACN,cAACC,EAAA,EAAIC,KAAL,UACE,cAAC,GAAD,CACEgE,wBAAyBA,GACzBnP,YAAaA,EACbG,kBAAmBA,GACnB0C,8BAA+BnG,MALrB,eAYdkZ,GAAiB,kBACrB,yCACQ,IACN,cAACC,EAAA,EAAD,CACE1e,QAAS8c,GACT6B,UAAQ,EACRC,QAAM,EACN3e,SAAU0d,GACVhe,KAAMqP,EAAMrP,WAKlB,OACE,eAAC,WAAD,WACE,eAACkf,EAAA,EAAD,CAAMC,QAAM,EAAZ,UACE,eAACD,EAAA,EAAK3M,IAAN,WACE,cAAC2M,EAAA,EAAKE,OAAN,CAAa9c,MAAO,EAApB,SACE,cAAC2I,EAAA,EAAD,CACE5I,UAAW,SACXP,MAAgB,yBAAT+W,EAAkC,QAAU,KAFrD,SAIE,cAACzE,EAAA,EAAD,CAEEL,MAAO8K,GACPrK,KAAM,CACJF,UAAU,EACVG,WAAW,EACXC,UAAU,GAEZE,YA5NW,SAACrU,EAAD,GAAyB,IAAnBoU,EAAkB,EAAlBA,YAC7BtL,GAAkB,kBAAmBsL,IA4NzBA,YAAawH,GART,uBAYV,cAAC+C,EAAA,EAAKE,OAAN,CAAa9c,MAAO,GAApB,SACE,eAAC2I,EAAA,EAAD,CAASnJ,MAAgB,yBAAT+W,EAAkC,QAAU,KAA5D,UACG2E,EACC,cAAC,GAAD,CAAgBnK,UAAW2I,GAAS/a,UAAWA,IAE/C,8BACE,cAAC2d,GAAD,MAGJ,cAACM,EAAA,EAAD,CAAMG,cAAc,SAApB,SACE,eAACH,EAAA,EAAK3M,IAAN,CAAU+M,QAAS,EAAnB,UACE,eAACJ,EAAA,EAAKE,OAAN,CAAa/c,UAAU,OAAOC,MAAO,EAArC,UACE,cAACuQ,EAAA,EAAD,CACE0M,OAAK,EACL7c,MAAM,mBACNvC,KAAK,qBACLJ,MAAO,EACPyY,QAASoF,EACTtd,SAAU,SAACC,EAAGmK,GAAJ,OAAamT,GAAcD,MAEvC,cAAC/K,EAAA,EAAD,CACE0M,OAAK,EACL7c,MAAM,sBACNvC,KAAK,qBACLJ,MAAO,EACPyY,SAAUoF,EACVtd,SAAU,SAACC,EAAGmK,GAAJ,OAAamT,GAAcD,SAGzC,cAACsB,EAAA,EAAKE,OAAN,CAAa/c,UAAU,SAASC,MAAO,EAAvC,SACE,cAACwc,GAAD,MAEF,eAACI,EAAA,EAAKE,OAAN,CAAa/c,UAAU,QAAQC,MAAO,EAAtC,UACE,cAAC4D,EAAA,EAAD,CACEG,QAlOK,WACvBiX,GAAYD,IAkOMvb,MAAM,QACNN,SAAUgc,EAHZ,SAKGH,EAAU,iBAAmB,wBAEhC,cAACnX,EAAA,EAAD,CACE1E,UAAW0H,EAAY0C,cACvBuK,UAAU,oBACV9P,QA/OM,WACxBoX,GAASD,IA2OO,SAKGA,EAAO,QAAU,4BAQhC,cAAC0B,EAAA,EAAK3M,IAAN,UACE,cAAChN,EAAA,EAAD,UACE,cAAC1D,EAAA,EAAD,CACEiJ,KAAM,eACN0U,OAAQ,aACR7c,QAAQ,uEACRb,MAAM,eAMd,cAAC,GAAD,CACEqN,MAAOuO,EAAWvO,MAClB2F,KAAM4I,EAAW5I,KACjBE,QAAS0I,EAAW1I,QACpBD,YAAa2I,EAAW3I,YACxBE,aAAcyI,EAAWzI,mBC7clBwK,OARf,WACE,OACE,8BACE,cAAC,GAAD,OCSSC,OARf,WACE,OACE,qBAAKvJ,UAAU,MAAf,SACE,cAAC,GAAD,OCGcwJ,QACa,cAA7B5S,OAAO6S,SAASC,UAEiB,UAA7B9S,OAAO6S,SAASC,UAEhB9S,OAAO6S,SAASC,SAASnT,MACrB,2D,OCPZoT,SAAgB,cAAC,GAAD,IAASvS,SAASwS,eAAe,SDyHzC,kBAAmBvR,WACnBA,UAAUwR,cAAcC,MACnB9R,MAAK,SAAC+R,GACHA,EAAaC,gBAEhBrE,OAAM,SAAC1X,GACJqU,QAAQrU,MAAMA,EAAM+V,c","file":"static/js/main.2e040c62.chunk.js","sourcesContent":["// Semantic UI React\nimport { Select } from \"semantic-ui-react\";\n\nfunction GestationSelect(props) {\n  let gestationWeeksOptions = [];\n  let gestWeeks = 23;\n  while (gestWeeks <= 42) {\n    gestationWeeksOptions.push({\n      key: gestWeeks.toString(10),\n      value: gestWeeks,\n      text: gestWeeks.toString(10),\n    });\n    gestWeeks++;\n  }\n\n  const gestationDaysOptions = [\n    { key: \"0\", value: 0, text: \"0\" },\n    { key: \"1\", value: 1, text: \"1\" },\n    { key: \"2\", value: 2, text: \"2\" },\n    { key: \"3\", value: 3, text: \"3\" },\n    { key: \"4\", value: 4, text: \"4\" },\n    { key: \"5\", value: 5, text: \"5\" },\n    { key: \"6\", value: 6, text: \"6\" },\n  ];\n\n  return (\n    <span>\n      <Select\n        compact\n        name=\"gestation_weeks\"\n        value={props.weeks}\n        options={gestationWeeksOptions}\n        onChange={(e, val) => props.handleGestationChange(val)}\n      />\n      &nbsp;+\n      <Select\n        compact\n        name=\"gestation_days\"\n        value={props.days}\n        options={gestationDaysOptions}\n        onChange={(e, val) => props.handleGestationChange(val)}\n      />\n      &nbsp; weeks\n    </span>\n  );\n}\n\nexport default GestationSelect;\n","import { Select } from \"semantic-ui-react\";\n\nfunction MeasurementMethodSelect(props) {\n  return (\n    <Select\n      name=\"measurement_method\"\n      placeholder=\"Measurement\"\n      value={props.measurementMethod}\n      onChange={(e, val) => props.handleChangeMeasurementMethod(val.value)}\n      options={props.measurementOptions}\n    />\n  );\n}\n\nexport default MeasurementMethodSelect;\n","import { Select } from \"semantic-ui-react\";\n\nfunction ReferenceSelect(props) {\n  return (\n    <Select\n      name=\"reference\"\n      placeholder=\"UK-WHO\"\n      value={props.reference}\n      onChange={(e, val) => props.handleChangeReference(val)}\n      options={props.referenceOptions}\n    />\n  );\n}\n\nexport default ReferenceSelect;\n","import { Select } from \"semantic-ui-react\";\n\nfunction SexSelect(props) {\n  return (\n    <Select\n      name=\"sex\"\n      placeholder=\"Sex\"\n      value={props.sex}\n      onChange={(e, val) => props.handleSexChange(val)}\n      options={props.sexOptions}\n    />\n  );\n}\n\nexport default SexSelect;\n","const measurementOptions = [\n    { key: 'height', value: 'height', text: 'Height (cm)', disabled: false },\n    { key: 'weight', value: 'weight', text: 'Weight (kg)', disabled: false },\n    { key: 'bmi', value: 'bmi', text: 'BMI (kg/m²)', disabled: false },\n    {\n        key: 'ofc',\n        value: 'ofc',\n        text: 'Head Circumference (cm)',\n        disabled: false,\n    },\n];\n\nexport default measurementOptions;\n","const sexOptions = [\n    { key: 'male', value: 'male', text: 'Boy', disabled: false },\n    { key: 'female', value: 'female', text: 'Girl', disabled: false },\n];\n\nexport default sexOptions;\n","const referenceOptions = [\n    { key: 'uk-who', value: 'uk-who', text: 'UK-WHO' },\n    { key: 'trisomy-21', value: 'trisomy-21', text: \"Down's Syndrome\" },\n    { key: 'turner', value: 'turner', text: \"Turner's syndrome\" },\n];\n\nexport default referenceOptions;\n","import { Message } from \"semantic-ui-react\";\n\nexport default function ErrorText({ errorText, showError }) {\n  if (!errorText) {\n    return null;\n  }\n  let makeErrorVisible = errorText ? true : false;\n  if (showError === false) {\n    makeErrorVisible = false;\n  }\n  return <>{makeErrorVisible && <Message color=\"red\">{errorText}</Message>}</>;\n}\n","import { Form, Select, Input } from \"semantic-ui-react\";\n\nconst boneAgeOptions = [\n  { key: \"gp\", value: \"greulich-pyle\", text: \"Greulich & Pyle\" },\n  {\n    key: \"twii\",\n    value: \"tanner-whitehouse-ii\",\n    text: \"Tanner Whitehouse II\",\n  },\n  {\n    key: \"twiii\",\n    value: \"tanner-whitehouse-iii\",\n    text: \"Tanner Whitehouse III\",\n  },\n  { key: \"fels\", value: \"fels\", text: \"Fels\" },\n  { key: \"bxpt\", value: \"bonexpert\", text: \"BoneXpert\" },\n];\n\nfunction BoneAgeTypeSelect(props) {\n  return (\n    <>\n      <Form.Group>\n        <Form.Field style={{ textAlign: \"left\" }} width=\"16\">\n          <Input\n            type=\"decimal\"\n            name=\"boneAge\"\n            placeholder=\"e.g. 3.5\"\n            labelPosition=\"right\"\n            label={{\n              content: \"years\",\n              basic: true,\n              color: \"black\",\n            }}\n            value={props.boneAge}\n            onChange={props.handleBoneAgeChange}\n          />\n        </Form.Field>\n      </Form.Group>\n      <Form.Group>\n        <Form.Field style={{ textAlign: \"left\" }} width=\"8\">\n          <Input\n            type=\"decimal\"\n            name=\"boneAgeSDS\"\n            placeholder=\"e.g. -3.5\"\n            labelPosition=\"right\"\n            label={{\n              content: \"SDS\",\n              basic: true,\n              color: \"black\",\n            }}\n            value={props.boneAgeSDS}\n            onChange={props.handleBoneAgeSDSChange}\n          />\n        </Form.Field>\n        <Form.Field style={{ textAlign: \"left\" }} width=\"8\">\n          <Input\n            type=\"decimal\"\n            name=\"boneAgeCentile\"\n            placeholder=\"e.g. 50\"\n            labelPosition=\"right\"\n            label={{\n              content: \"centile\",\n              basic: true,\n              color: \"black\",\n            }}\n            value={props.boneAgeCentile}\n            onChange={props.handleBoneAgeCentileChange}\n          />\n        </Form.Field>\n      </Form.Group>\n      <Form.Group>\n        <Form.Field style={{ textAlign: \"left\" }} width=\"16\">\n          <label>Comment</label>\n          <Input\n            type=\"text\"\n            name=\"boneAgeText\"\n            placeholder=\"e.g. This bone age is advanced\"\n            value={props.boneAgeText}\n            onChange={props.handleBoneAgeTextChange}\n          />\n        </Form.Field>\n      </Form.Group>\n      <Form.Group>\n        <Form.Field style={{ textAlign: \"left\" }} width=\"16\">\n          <label>Bone Age Reference</label>\n          <Select\n            name=\"boneagetype\"\n            placeholder=\"e.g. G&P\"\n            value={props.boneAgeType}\n            onChange={(e, val) => props.handleChangeBoneAgeType(val)}\n            options={boneAgeOptions}\n          />\n        </Form.Field>\n      </Form.Group>\n    </>\n  );\n}\n\nexport default BoneAgeTypeSelect;\n","export const formatDate = (inputDate) => {\n    let date;\n    let month;\n    let day;\n    let year;\n    try {\n        inputDate.getTime();\n        date = new Date(inputDate);\n        month = '' + (date.getMonth() + 1);\n        day = '' + date.getDate();\n        year = date.getFullYear();\n        if (month.length < 2) {\n            month = '0' + month;\n        }\n        if (day.length < 2) {\n            day = '0' + day;\n        }\n\n        return [year, month, day].join('-');\n    } catch (error) {\n        throw new Error('Input date for formatDate not recognised');\n    }\n};\n\nexport const parseDate = (inputDate) => {\n    const isDaysInMonthValid = (parsedArray) => {\n        const [jsYear, jsMonth, jsDay] = parsedArray;\n        if (jsMonth === 1 && jsDay === 29) {\n            if (jsYear % 4 === 0) {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            const daysInMonthLookup = [\n                31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31,\n            ];\n            const validMaxDaysInMonth = daysInMonthLookup[jsMonth];\n            if (\n                validMaxDaysInMonth !== undefined &&\n                jsDay <= validMaxDaysInMonth\n            ) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    };\n    try {\n        const dateArray = inputDate.split('-');\n        const workingArray = dateArray.map((element, index) => {\n            if (element !== '') {\n                const madeNumber = Number(element);\n                if (Number.isNaN(madeNumber)) {\n                    throw new Error();\n                } else {\n                    return index === 1 ? madeNumber - 1 : madeNumber;\n                }\n            } else {\n                throw new Error();\n            }\n        });\n        if (\n            workingArray.length !== 3 ||\n            workingArray[1] < 0 ||\n            workingArray[1] > 11 ||\n            workingArray[2] < 1 ||\n            workingArray[2] > 31\n        ) {\n            throw new Error();\n        }\n        if (isDaysInMonthValid(workingArray)) {\n            return new Date(...workingArray);\n        } else {\n            throw new Error();\n        }\n    } catch (error) {\n        return null;\n    }\n};\n","import { Form, Input, Header, Button, Container } from \"semantic-ui-react\";\n\nconst UtilitiesForm = (props) => {\n  return (\n    <Container>\n      <Header\n        as=\"h5\"\n        textAlign=\"left\"\n        style={{\n          paddingTop: 20,\n        }}\n      >\n        Midparental Height\n      </Header>\n      <Form onSubmit={props.utilitiesFormDataSubmit}>\n        <Form.Group>\n          <Form.Field width={8} required>\n            <label style={{ textAlign: \"left\" }}>Maternal height</label>\n            <Input\n              name=\"height_maternal\"\n              onChange={props.changeMaternalHeight}\n              placeholder=\"e.g. 167\"\n              value={props.maternalHeight ? props.maternalHeight : \"\"}\n              label={{\n                content: \"cm\",\n                basic: true,\n                color: \"black\",\n              }}\n              labelPosition=\"right\"\n            />\n          </Form.Field>\n          <Form.Field width={8} required>\n            <label style={{ textAlign: \"left\" }}>Paternal height</label>\n            <Input\n              name=\"height_maternal\"\n              placeholder=\"e.g. 179\"\n              onChange={props.changePaternalHeight}\n              value={props.paternalHeight ? props.paternalHeight : \"\"}\n              label={{\n                content: \"cm\",\n                basic: true,\n                color: \"black\",\n              }}\n              labelPosition=\"right\"\n            />\n          </Form.Field>\n        </Form.Group>\n        <Form.Field>\n          <Button\n            disabled={\n              props.maternalHeight && props.paternalHeight ? false : true\n            }\n            color=\"black\"\n            fluid={true}\n            type={\"submit\"}\n          >\n            Calculate Mid-parental Height\n          </Button>\n        </Form.Field>\n        {props.midParentalHeightDataPresent && (\n          <Form.Field>\n            <Button type=\"submit\" onClick={props.removeMidParentalHeight}>\n              Remove Mid-parental Height\n            </Button>\n          </Form.Field>\n        )}\n      </Form>\n    </Container>\n  );\n};\n\nexport default UtilitiesForm;\n","import { useEffect, useState } from \"react\";\n\nimport {\n  Container,\n  Segment,\n  Form,\n  Input,\n  Button,\n  Header,\n  Icon,\n} from \"semantic-ui-react\";\nimport GestationSelect from \"./subcomponents/GestationSelect\";\nimport MeasurementMethodSelect from \"./subcomponents/MeasurementMethodSelect\";\nimport ReferenceSelect from \"./subcomponents/ReferenceSelect\";\nimport SexSelect from \"./subcomponents/SexChoice\";\nimport measurementOptions from \"../selectData/measurementOptions\";\nimport sexOptions from \"../selectData/sexOptions\";\nimport referenceOptions from \"../selectData/referenceOptions\";\nimport ErrorText from \"./subcomponents/ErrorText\";\nimport BoneAgeTypeSelect from \"./subcomponents/BoneAge\";\nimport { formatDate, parseDate } from \"../functions/dateHelpers\";\nimport UtilitiesForm from \"./subcomponents/UtilitiesForm\";\n\nconst ROBERT_WADLOW = 272; // interesting fact - Robert Wadlow (22/2/1918 – 15/7/1940) was the world's tallest man\nconst JON_BROWER_MINNOCH = 635; // interesting fact -  Jon Brower Minnoch (Born USA) was the world's heaviest man\nconst KHALID_BIN_MOHSEN_SHAARI = 204; // Khalid bin Mohsen Shaari (2/8/1991) from Saudi Arabia had the highest recorded BMI\n\nconst MeasurementForm = (props) => {\n  const [birth_date, setBirth_date] = useState(formatDate(new Date()));\n  const [observation_date, setObservation_date] = useState(\n    formatDate(new Date())\n  );\n  const [measurement, setMeasurement] = useState({\n    observation_value: \"\",\n  });\n  const [gestation_weeks, setGestation_weeks] = useState(40);\n  const [gestation_days, setGestation_days] = useState(0);\n  const [birth_date_error, setBirth_date_error] = useState(\"\");\n  const [observation_date_error, setObservation_date_error] = useState(\"\");\n  const [observation_value_error, setObservation_value_error] =\n    useState(\"empty\");\n  const [form_valid, setForm_valid] = useState(false);\n  const [boneAge, setBoneAge] = useState(\"\");\n  const [boneAgeType, setBoneAgeType] = useState(\"greulich-pyle\");\n  const [boneAgeSDS, setBoneAgeSDS] = useState(\"\");\n  const [boneAgeCentile, setBoneAgeCentile] = useState(\"\");\n  const [boneAgeText, setBoneAgeText] = useState(\"\");\n  const [events, setEvents] = useState([\"\"]);\n  const [showBoneAge, setShowBoneAge] = useState(false);\n  const [showEvents, setShowEvents] = useState(false);\n\n  const handleChangeReference = ({ value }) => {\n    if (value !== \"uk-who\") {\n      props.updateGlobalState(\"mid-parental-height\", \"reset\"); //midparental height on present on UK-WHO reference\n    }\n    props.updateGlobalState(\"reference\", value);\n  };\n\n  const handleBoneAgeTypeChange = ({ value }) => {\n    setBoneAgeType(value);\n  };\n\n  const handleBoneAgeChange = (event, data) => {\n    const boneAge = data.value;\n    setBoneAge(boneAge);\n  };\n\n  const handleBoneAgeSDSChange = (event, data) => {\n    const boneAgeSDS = data.value;\n    setBoneAgeSDS(boneAgeSDS);\n  };\n\n  const handleBoneAgeCentileChange = (event, data) => {\n    const boneAgeCentile = data.value;\n    setBoneAgeCentile(boneAgeCentile);\n  };\n\n  const handleBoneAgeTextChange = (event, data) => {\n    const boneAgeText = data.value;\n    setBoneAgeText(boneAgeText);\n  };\n\n  const handleChangeDate = (event) => {\n    event.target.name === \"birth_date\"\n      ? setBirth_date(event.target.value)\n      : setObservation_date(event.target.value);\n    const newDate = parseDate(event.target.value);\n    if (newDate) {\n      const observation_date_object =\n        event.target.name === \"birth_date\"\n          ? parseDate(observation_date)\n          : newDate;\n      const birth_date_object =\n        event.target.name === \"birth_date\" ? newDate : parseDate(birth_date);\n      const timeInterval =\n        observation_date_object.getTime() - birth_date_object.getTime();\n      if (timeInterval < 0) {\n        if (event.target.name === \"birth_date\") {\n          setBirth_date_error(\n            \"Date of birth cannot come after the date of measurement\"\n          );\n        } else if (event.target.name === \"observation_date\") {\n          setObservation_date_error(\n            \"Date of measurement cannot come before the date of birth.\"\n          );\n        }\n      } else if (timeInterval > 631139040000) {\n        if (event.target.name === \"birth_date\") {\n          setBirth_date_error(\"No centile data exists over 20 years of age.\");\n        } else {\n          setObservation_date_error(\n            \"No centile data exists over 20 years of age.\"\n          );\n        }\n      } else {\n        setBirth_date_error(\"\");\n        setObservation_date_error(\"\");\n      }\n    } else {\n      if (event.target.name === \"birth_date\") {\n        setBirth_date_error(\"Please enter a valid date.\");\n      } else {\n        setObservation_date_error(\"Please enter a valid date.\");\n      }\n    }\n  };\n\n  const handleObservationChange = (observation, data) => {\n    // this is updating an observation value\n    const observation_value = data.value;\n    setMeasurement({ observation_value: observation_value });\n    setObservation_value_error(\n      validateObservationValue(\n        props.globalState.measurementMethod,\n        observation_value\n      )\n    );\n  };\n\n  const validateObservationValue = (measurement_method, observation_value) => {\n    if (observation_value === \"\") {\n      return \"empty\";\n    }\n    if (Number.isNaN(Number(observation_value))) {\n      return \"Please enter a valid number.\";\n    }\n    if (measurement_method === \"height\") {\n      if (observation_value < 20) {\n        return \"The \" + measurement_method + \" you entered is too low.\";\n      } else if (observation_value > ROBERT_WADLOW) {\n        return \"The \" + measurement_method + \" you entered is too tall.\";\n      } else {\n        return \"\";\n      }\n    }\n    if (measurement_method === \"weight\") {\n      if (observation_value < 0.01) {\n        return \"The \" + measurement_method + \" you entered is too low.\";\n      } else if (observation_value > JON_BROWER_MINNOCH) {\n        return \"The \" + measurement_method + \" you entered is too heavy.\";\n      } else {\n        return \"\";\n      }\n    }\n    if (measurement_method === \"bmi\") {\n      if (observation_value < 5) {\n        return \"The \" + measurement_method + \" you entered is too low.\";\n      } else if (observation_value > KHALID_BIN_MOHSEN_SHAARI) {\n        return \"The \" + measurement_method + \" you entered is too high.\";\n      } else {\n        return \"\";\n      }\n    }\n    if (measurement_method === \"ofc\") {\n      if (observation_value < 25) {\n        return \"The \" + measurement_method + \" you entered is too low.\";\n      } else if (observation_value > 70) {\n        return \"The \" + measurement_method + \" you entered is too high.\";\n      } else {\n        return \"\";\n      }\n    }\n  };\n\n  const handleSubmit = () => {\n    // passes the form data back to the parent (measurement segment)\n    let boneageData = {};\n    let eventText = {\n      events: [],\n    };\n    if (events.length > 0 && events[0].length > 0) {\n      eventText = {\n        events_text: events,\n      };\n    }\n    if (showBoneAge) {\n      if (!isNaN(parseFloat(boneAge))) {\n        boneageData = {\n          bone_age: parseFloat(boneAge),\n          bone_age_type: boneAgeType,\n          bone_age_centile: isNaN(parseFloat(boneAgeCentile))\n            ? null\n            : parseFloat(boneAgeCentile),\n          bone_age_sds: isNaN(parseFloat(boneAgeSDS))\n            ? null\n            : parseFloat(boneAgeSDS),\n          bone_age_text: boneAgeText,\n        };\n      }\n    }\n    const measurementFormData = {\n      birth_date: birth_date,\n      observation_date: observation_date,\n      measurement_method: props.globalState.measurementMethod,\n      observation_value: measurement.observation_value,\n      gestation_weeks: gestation_weeks,\n      gestation_days: gestation_days,\n      sex: props.globalState.sex,\n    };\n\n    const formData = Object.assign(measurementFormData, boneageData, eventText);\n    props.handleMeasurementResult(formData);\n  };\n\n  const handleChangeMeasurementMethod = (newMeasurementMethod) => {\n    props.updateGlobalState(\"measurementMethod\", newMeasurementMethod);\n  };\n\n  const handleChangeGestation = (data) => {\n    const { name, value } = data;\n    if (name === \"gestation_weeks\") {\n      setGestation_weeks(value);\n      if (value === 42) {\n        setGestation_days(0);\n      }\n    } else if (name === \"gestation_days\") {\n      if (gestation_weeks === 42) {\n        setGestation_days(0);\n      } else {\n        setGestation_days(value);\n      }\n    }\n  };\n\n  const handleChangeSex = (val) => {\n    props.updateGlobalState(\"sex\", val.value);\n  };\n\n  const handleResetCurrentGraph = () => {\n    props.updateGlobalState(\"resetCurrent\", true);\n  };\n\n  const handleUndoLast = () => {\n    props.updateGlobalState(\"undoLast\", true);\n  };\n\n  const handleShowEvents = (e) => {\n    e.preventDefault();\n    const isPressed = showEvents;\n    setShowEvents(!isPressed);\n    setEvents([\"\"]);\n  };\n\n  const handleAddEvent = (e) => {\n    e.preventDefault();\n    let allEvents = [...events];\n    if (allEvents[allEvents.length - 1] === \"\") {\n      // cannot add a new event on top of empty one\n      return;\n    }\n    allEvents.push(\"\");\n    setEvents(allEvents);\n  };\n\n  const handleRemoveEvent = (e, event) => {\n    e.preventDefault();\n    const newEvents = events.filter((ev) => ev !== event);\n    setEvents(newEvents);\n  };\n\n  const handleShowBoneAge = (e) => {\n    e.preventDefault();\n    const isPressed = showBoneAge;\n    setShowBoneAge(!isPressed);\n    setBoneAge(\"\");\n    setBoneAgeCentile(\"\");\n    setBoneAgeSDS(\"\");\n    setBoneAgeType(\"greulich-pyle\");\n    setBoneAgeText(\"\");\n  };\n\n  const handleMaternalHeight = (event, data) => {\n    const paternalHeight =\n      props.globalState[\"parentalHeights\"][\"height_paternal\"];\n    const heights = {\n      height_maternal: data.value,\n      height_paternal: paternalHeight,\n    };\n    props.updateGlobalState(\"parentalHeights\", heights);\n  };\n\n  const handlePaternalHeight = (event, data) => {\n    const maternalHeight =\n      props.globalState[\"parentalHeights\"][\"height_maternal\"];\n    const heights = {\n      height_maternal: maternalHeight,\n      height_paternal: data.value,\n    };\n    props.updateGlobalState(\"parentalHeights\", heights);\n  };\n\n  const removeMidParentalHeight = () => {\n    props.updateGlobalState(\"mid-parental-height\", \"reset\");\n  };\n\n  const midParentalHeightDataPresent = () => {\n    if (props.globalState[\"mid-parental-height\"].mid_parental_height) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const handleUtilitiesDataSubmit = (event) => {\n    if (event.target[0].value < 100 && event.target[1].value < 100) {\n      return;\n    }\n    const formData = {\n      height_maternal: event.target[0].value,\n      height_paternal: event.target[1].value,\n      sex: props.globalState[\"sex\"],\n    };\n    props.updateGlobalState(\"isMidParentalHeightRequest\", true);\n    props.updateGlobalState(\"parentalHeights\", {\n      maternalHeight: event.target[0].value,\n      paternalHeight: event.target[1].value,\n    });\n    props.handleUtilitiesFormDataSubmit(formData);\n  };\n\n  useEffect(() => {\n    const formIsValid = () => {\n      if (\n        birth_date_error === \"\" &&\n        observation_date_error === \"\" &&\n        observation_value_error === \"\"\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    if (formIsValid()) {\n      setForm_valid(formIsValid());\n    }\n    if (props.globalState.clearMeasurement) {\n      const newMeasurement = { ...measurement };\n      newMeasurement.observation_value = \"\";\n      setMeasurement(newMeasurement);\n      setObservation_value_error(\"empty\");\n      setForm_valid(false);\n      setShowBoneAge(false);\n      setShowEvents(false);\n      setEvents([\"\"]);\n      setBoneAgeCentile(\"\");\n      setBoneAgeSDS(\"\");\n      setBoneAgeType(\"greulich-pyle\");\n      setBoneAgeText(\"\");\n      props.updateGlobalState(\"clearMeasurement\", false);\n    }\n  }, [\n    form_valid,\n    showBoneAge,\n    showEvents,\n    events,\n    boneAgeCentile,\n    boneAgeSDS,\n    boneAgeType,\n    boneAgeText,\n    props,\n    measurement,\n    birth_date_error,\n    observation_date_error,\n    observation_value_error,\n  ]);\n\n  const makeDynamic = (option) => {\n    const newDisabled = props.globalState.disabled[option.key];\n    return { ...option, disabled: newDisabled };\n  };\n  const dynamicMeasurementOptions = measurementOptions.map(makeDynamic);\n\n  const dynamicSexOptions = sexOptions.map(makeDynamic);\n\n  return (\n    <Container>\n      <Form onSubmit={handleSubmit}>\n        <Form.Field required>\n          <Header as=\"h5\" textAlign=\"left\">\n            Reference\n          </Header>\n          <ReferenceSelect\n            reference={props.globalState.reference}\n            handleChangeReference={handleChangeReference}\n            referenceOptions={referenceOptions}\n          />\n        </Form.Field>\n        <Form.Field required>\n          <Header as=\"h5\" textAlign=\"left\">\n            Dates\n          </Header>\n          <Input\n            label=\"Birth Date\"\n            type=\"date\"\n            name=\"birth_date\"\n            value={birth_date}\n            placeholder=\"Date of Birth\"\n            onChange={handleChangeDate}\n          />\n        </Form.Field>\n        <Form.Field required>\n          <Input\n            label=\"Measurement Date\"\n            type=\"date\"\n            name=\"observation_date\"\n            value={observation_date}\n            placeholder=\"Date of Measurement\"\n            onChange={handleChangeDate}\n          />\n        </Form.Field>\n        <ErrorText errorText={observation_date_error} />\n        <ErrorText errorText={birth_date_error} />\n\n        <Form.Group style={{ textAlign: \"left\" }}>\n          <Form.Field style={{ marginRight: 20 }} required>\n            <label>Sex</label>\n            <SexSelect\n              sex={props.globalState.sex}\n              handleSexChange={handleChangeSex}\n              sexOptions={dynamicSexOptions}\n            />\n          </Form.Field>\n          <Form.Field>\n            <label>Gestation</label>\n            <GestationSelect\n              name=\"gestation_select\"\n              weeks={gestation_weeks}\n              days={gestation_days}\n              handleGestationChange={handleChangeGestation}\n            />\n          </Form.Field>\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Field required>\n            <label style={{ textAlign: \"left\" }}>Measurements</label>\n            <MeasurementMethodSelect\n              measurementMethod={props.globalState.measurementMethod}\n              handleChangeMeasurementMethod={handleChangeMeasurementMethod}\n              measurementOptions={dynamicMeasurementOptions}\n            />\n          </Form.Field>\n          <Form.Field width={8} required>\n            <label style={{ textAlign: \"left\" }}>Value</label>\n            <Input\n              type=\"decimal\"\n              name=\"observation_value\"\n              placeholder=\"Measurement\"\n              value={measurement.observation_value}\n              label={{\n                content: props.globalState.units.toString(),\n                basic: true,\n                color: \"black\",\n              }}\n              labelPosition=\"right\"\n              onChange={handleObservationChange}\n            />\n          </Form.Field>\n        </Form.Group>\n        <ErrorText\n          showError={observation_value_error !== \"empty\"}\n          errorText={observation_value_error}\n        />\n        <Form.Group>\n          {props.globalState.measurementMethod === \"height\" && (\n            <Form.Field width={10}>\n              <Button\n                icon\n                fluid\n                labelPosition=\"left\"\n                onClick={handleShowBoneAge}\n                color=\"black\"\n              >\n                <Icon name=\"hand paper outline\" />\n                Add Bone Age\n              </Button>\n            </Form.Field>\n          )}\n          <Form.Field width={10}>\n            <Button\n              icon\n              labelPosition=\"left\"\n              onClick={handleShowEvents}\n              fluid\n              color=\"black\"\n            >\n              <Icon name=\"bookmark outline\" />\n              Add Event\n            </Button>\n          </Form.Field>\n        </Form.Group>\n\n        {showBoneAge && (\n          <Segment>\n            <BoneAgeTypeSelect\n              boneAge={boneAge}\n              handleBoneAgeChange={handleBoneAgeChange}\n              boneAgeType={boneAgeType}\n              handleChangeBoneAgeType={handleBoneAgeTypeChange}\n              boneAgeCentile={boneAgeCentile}\n              handleBoneAgeCentileChange={handleBoneAgeCentileChange}\n              boneAgeSDS={boneAgeSDS}\n              handleBoneAgeSDSChange={handleBoneAgeSDSChange}\n              boneAgeText={boneAgeText}\n              handleBoneAgeTextChange={handleBoneAgeTextChange}\n            />\n          </Segment>\n        )}\n\n        {showEvents && (\n          <Segment>\n            {events.map((anEvent, index) => {\n              return (\n                <Form.Group key={index}>\n                  <Form.Field style={{ textAlign: \"left\" }} width=\"14\">\n                    <Input\n                      name=\"event\"\n                      placeholder=\"e.g. diagnosis\"\n                      onChange={(data) => {\n                        let thisEvent = [...events];\n                        thisEvent[index] = data.target.value;\n                        setEvents(thisEvent);\n                      }}\n                      value={anEvent}\n                    />\n                  </Form.Field>\n\n                  {index === events.length - 1 ? (\n                    <Button icon circular onClick={(e) => handleAddEvent(e)}>\n                      <Icon name=\"plus circle\" />\n                    </Button>\n                  ) : (\n                    <Button\n                      icon\n                      circular\n                      onClick={(e) => handleRemoveEvent(e, anEvent)}\n                    >\n                      <Icon name=\"minus circle\" />\n                    </Button>\n                  )}\n                </Form.Group>\n              );\n            })}\n          </Segment>\n        )}\n\n        <Form.Field>\n          <Button\n            content=\"Calculate Centiles and Add To Chart\"\n            type=\"submit\"\n            fluid\n            disabled={!form_valid}\n            color=\"black\"\n            icon=\"line graph\"\n            labelPosition=\"right\"\n          />\n        </Form.Field>\n      </Form>\n      {props.globalState.isDataPresent && (\n        <Segment>\n          <Button\n            content=\"Reset Chart\"\n            icon=\"power off\"\n            onClick={handleResetCurrentGraph}\n          />\n          <Button content=\"Remove Last\" icon=\"undo\" onClick={handleUndoLast} />\n        </Segment>\n      )}\n\n      {props.globalState.reference === \"uk-who\" && (\n        <UtilitiesForm\n          utilitiesFormDataSubmit={handleUtilitiesDataSubmit}\n          changeMaternalHeight={handleMaternalHeight}\n          changePaternalHeight={handlePaternalHeight}\n          maternalHeight={props.globalState.parentalHeights.height_maternal}\n          paternalHeight={props.globalState.parentalHeights.height_paternal}\n          removeMidParentalHeight={removeMidParentalHeight}\n          midParentalHeightDataPresent={midParentalHeightDataPresent()}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default MeasurementForm;\n","import { Dimmer, Loader } from \"semantic-ui-react\";\n\nimport { RCPCHChart } from \"@rcpch/digital-growth-charts-react-component-library\";\n\nimport { addToClipboard } from \"../functions/addToClipboard\";\nimport { canvasFromSVG } from \"../functions/canvasFromSVG\";\n\nfunction ChartData(props) {\n  const isLoading = props.isLoading;\n\n  let measurements = props.measurementsArray; // if SDS charts, the array already is in the structure { measurementMethod: [measurementsArray]}\n  if (props.chartType === \"centile\") {\n    // as of 7.0.0 the results now need to be presented as an object where the key is the measurement method\n    measurements = { [props.measurementMethod]: props.measurementsArray };\n  }\n\n  return (\n    <div>\n      <Dimmer active={isLoading}>\n        <Loader>Fetching Data</Loader>\n      </Dimmer>\n      <RCPCHChart\n        reference={props.reference}\n        measurementMethod={props.measurementMethod}\n        sex={props.sex}\n        title={\"Name - Hospital Number\"}\n        measurements={measurements} // this is the plottable child data: NOTE IN Charts 7.0.0 this has changed\n        midParentalHeightData={props.midParentalHeightData}\n        theme={props.theme}\n        enableZoom\n        chartType={props.chartType}\n        enableExport={true}\n        exportChartCallback={exportChartCallback}\n        clinicianFocus={props.clinicianFocus}\n      />\n    </div>\n  );\n}\n\nfunction exportChartCallback(svg) {\n  canvasFromSVG(svg).then((result) => {\n    addToClipboard(result);\n  });\n}\n\nexport default ChartData;\n","export const canvasFromSVG = (svg) => {\n  return new Promise((resolve, reject) => {\n    // get outerHTML\n    let outerHTMLSVG = svg.outerHTML;\n    // add namespace\n    if (!outerHTMLSVG.match(/xmlns=\"/im)) {\n      outerHTMLSVG = outerHTMLSVG.replace(\n        \"<svg \",\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" '\n      );\n    }\n    // create blob\n    const blob = new Blob([outerHTMLSVG], {\n      type: \"image/svg+xml;charset=utf-8\",\n    });\n    // create url\n    const domURL = window.URL || window.webkitURL || window;\n    const blobURL = domURL.createObjectURL(blob);\n    // figure out the height and width from svg text\n    let match = outerHTMLSVG.match(/height=\"(\\d+)/m);\n    const height = match && match[1] ? parseInt(match[1], 10) : 200;\n    match = outerHTMLSVG.match(/width=\"(\\d+)/m);\n    const width = match && match[1] ? parseInt(match[1], 10) : 200;\n    // create a canvas element to pass through\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width + 5;\n    canvas.height = height + 5;\n    const ctx = canvas.getContext(\"2d\");\n\n    const image = new Image();\n    image.onload = function () {\n      ctx.drawImage(this, 5, 5);\n      // we don't need the original any more\n      domURL.revokeObjectURL(blobURL);\n      // download(canvas);\n      resolve(canvas);\n    };\n\n    image.src = blobURL;\n  });\n};\n","export const addToClipboard = (canvas) => {\n    canvas.toBlob(function (blob) {\n        const item = new window.ClipboardItem({ 'image/png': blob });\n        navigator.clipboard.write([item]);\n    });\n};\n","// deep copy variables\n// note: this is only copies enumerable properties\n\nconst deepCopyArray = (oldArray) => {\n    const copyArray = [];\n    oldArray.forEach((element) => {\n        if (Array.isArray(element)) {\n            copyArray.push(deepCopyArray(element));\n        } else {\n            if (typeof element === 'object' && element !== null) {\n                copyArray.push(deepCopyObject(element));\n            } else {\n                copyArray.push(element);\n            }\n        }\n    });\n    return copyArray;\n};\n\nconst deepCopyObject = (oldObject) => {\n    const tempObject = {};\n    for (const key in oldObject) {\n        const value = oldObject[key];\n        if (Array.isArray(value)) {\n            tempObject[key] = deepCopyArray(value);\n        } else {\n            if (typeof value === 'object' && value !== null) {\n                tempObject[key] = deepCopyObject(value);\n            } else {\n                tempObject[key] = value;\n            }\n        }\n    }\n    return tempObject;\n};\n\nconst deepCopy = (input) => {\n    if (Array.isArray(input)) {\n        return deepCopyArray(input);\n    } else if (typeof input === 'object' && input !== null) {\n        return deepCopyObject(input);\n    } else {\n        return input;\n    }\n};\n\nexport default deepCopy;\n","export const units = (measurementMethod) => {\n    if (measurementMethod === 'height') {\n        return 'cm';\n    }\n    if (measurementMethod === 'weight') {\n        return 'kg';\n    }\n    if (measurementMethod === 'bmi') {\n        return 'kg/m²';\n    }\n    if (measurementMethod === 'ofc') {\n        return 'cm';\n    }\n};\n","import React from \"react\";\n\nimport { Table } from \"semantic-ui-react\";\n\nimport { units } from \"../../functions/units\";\n\n\nexport default function TableCellObservationValue({ measurement }) {\n  const value = measurement.child_observation_value.observation_value;\n  const measurementMethod = measurement.child_observation_value.measurement_method;\n  return (\n    <Table.Cell>\n      {value} {units(measurementMethod)}\n    </Table.Cell>\n  );\n}\n","import React from \"react\";\nimport { Table } from \"semantic-ui-react\";\n\nexport default function TableCellMeasurementAges({\n  measurementDates,\n  decimalAge,\n  ageChoice,\n  chronologicalStyles,\n}) {\n  const correctedAge = decimalAge\n    ? measurementDates.corrected_decimal_age.toFixed(3)\n    : measurementDates.corrected_calendar_age;\n\n  const chronologicalAge = decimalAge\n    ? measurementDates.chronological_decimal_age.toFixed(3)\n    : measurementDates.chronological_calendar_age;\n  return (\n    <Table.Cell>\n      {(ageChoice === \"corrected\" || ageChoice === \"both\") && (\n        <p>{correctedAge}</p>\n      )}\n      {(ageChoice === \"chronological\" || ageChoice === \"both\") && (\n        <p style={chronologicalStyles}>{chronologicalAge}</p>\n      )}\n    </Table.Cell>\n  );\n}\n","import React from \"react\";\n\nimport { Table } from \"semantic-ui-react\";\n\nexport default function TableCellObservationDate({ measurement }) {\n  const observationDate = new Date(\n    measurement.measurement_dates.observation_date\n  ).toLocaleDateString(\"en-GB\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n\n  return <Table.Cell>{observationDate}</Table.Cell>;\n}\n","import React from \"react\";\n\nimport { Table } from \"semantic-ui-react\";\n\nexport default function TableCellCentiles({\n  measurementCentiles,\n  ageChoice,\n  chronologicalStyles,\n}) {\n  const correctedCentile = measurementCentiles.corrected_centile;\n  const chronologicalCentile = measurementCentiles.chronological_centile;\n  return (\n    <Table.Cell>\n      {(ageChoice === \"corrected\" || ageChoice === \"both\") && (\n        <p>{correctedCentile}</p>\n      )}\n      {(ageChoice === \"chronological\" || ageChoice === \"both\") && (\n        <p style={chronologicalStyles}>{chronologicalCentile}</p>\n      )}\n    </Table.Cell>\n  );\n}\n","import React from \"react\";\n\nimport { Table } from \"semantic-ui-react\";\n\nexport default function TableCellSDS({\n  measurementSDS,\n  ageChoice,\n  chronologicalStyles,\n}) {\n  const correctedSDS = Math.round(measurementSDS.corrected_sds * 1000) / 1000;\n  const chronologicalSDS =\n    Math.round(measurementSDS.chronological_sds * 1000) / 1000;\n  return (\n    <Table.Cell>\n      {(ageChoice === \"corrected\" || ageChoice === \"both\") && (\n        <p>{correctedSDS}</p>\n      )}\n      {(ageChoice === \"chronological\" || ageChoice === \"both\") && (\n        <p style={chronologicalStyles}>{chronologicalSDS}</p>\n      )}\n    </Table.Cell>\n  );\n}\n","import * as React from \"react\";\nimport { Table } from \"semantic-ui-react\";\n\nimport TableCellObservationValue from \"./TableCellObservationValue\";\nimport TableCellMeasurementAges from \"./TableCellMeasurementAges\";\nimport TableCellObservationDate from \"./TableCellObservationDate\";\nimport TableCellCentiles from \"./TableCellCentiles\";\nimport TableCellSDS from \"./TableCellSDS\";\n\nexport const ResultsDataTableRow = ({\n  measurement,\n  ageChoice,\n  decimalAge,\n  chronologicalStyles,\n}) => {\n  return (\n    <Table.Row>\n      <TableCellObservationDate measurement={measurement} />\n      <TableCellObservationValue measurement={measurement} />\n      <TableCellMeasurementAges\n        measurementDates={measurement.measurement_dates}\n        decimalAge={decimalAge}\n        ageChoice={ageChoice}\n        chronologicalStyles={chronologicalStyles}\n      />\n      <TableCellCentiles\n        measurementCentiles={measurement.measurement_calculated_values}\n        ageChoice={ageChoice}\n        chronologicalStyles={chronologicalStyles}\n      />\n      <TableCellSDS\n        measurementSDS={measurement.measurement_calculated_values}\n        ageChoice={ageChoice}\n        chronologicalStyles={chronologicalStyles}\n      />\n    </Table.Row>\n  );\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { Table, Checkbox, Form, Button } from \"semantic-ui-react\";\nimport { ResultsDataTableRow } from \"./ResultsDataTableRow\";\n\nexport const ResultsDataTable = ({\n  // dataTitle,\n  data,\n  chronologicalStyles,\n  // fontChoice,\n}) => {\n  const [ageChoice, setAgeChoice] = useState(\"corrected\");\n  const [decimalAge, setDecimalAge] = useState(false);\n\n  return (\n    <div>\n      <Form>\n        <Form.Group>\n          {data.length > 0 &&\n            data[0].measurement_dates.corrected_decimal_age !==\n              data[0].measurement_dates.chronological_decimal_age && (\n              <Button.Group>\n                <Button\n                  value=\"corrected\"\n                  active={ageChoice === \"corrected\"}\n                  onClick={(e, { value }) => setAgeChoice(value)}\n                  style={{\n                    fontWeight: ageChoice === \"corrected\" ? \"bold\" : \"normal\",\n                  }}\n                >\n                  Corrected\n                </Button>\n                <Button\n                  value=\"chronological\"\n                  active={ageChoice === \"chronological\"}\n                  onClick={(e, { value }) => setAgeChoice(value)}\n                  style={{\n                    fontWeight:\n                      ageChoice === \"chronological\" ? \"bold\" : \"normal\",\n                    ...chronologicalStyles,\n                  }}\n                >\n                  Chronological\n                </Button>\n                <Button\n                  value=\"both\"\n                  active={ageChoice === \"both\"}\n                  onClick={(e, { value }) => setAgeChoice(value)}\n                  style={{\n                    fontWeight: ageChoice === \"both\" ? \"bold\" : \"normal\",\n                  }}\n                >\n                  Both\n                </Button>\n              </Button.Group>\n            )}\n          <Checkbox\n            toggle\n            onChange={() => setDecimalAge(!decimalAge)}\n            fitted={false}\n            label=\"Decimal age?\"\n            style={{ marginLeft: \"1em\" }}\n          />\n        </Form.Group>\n      </Form>\n\n      <Table basic=\"very\" celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Date of Measurement</Table.HeaderCell>\n            <Table.HeaderCell>Measurement</Table.HeaderCell>\n            <Table.HeaderCell>Age</Table.HeaderCell>\n            <Table.HeaderCell>Centile</Table.HeaderCell>\n            <Table.HeaderCell>SDS</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {data.map((measurement, index) => {\n            return (\n              <ResultsDataTableRow\n                measurement={measurement}\n                key={index}\n                ageChoice={ageChoice}\n                decimalAge={decimalAge}\n                chronologicalStyles={chronologicalStyles}\n              />\n            );\n          })}\n        </Table.Body>\n      </Table>\n    </div>\n  );\n};\n","import { Segment, Tab, Menu } from \"semantic-ui-react\";\nimport { ResultsDataTable } from \"./ResultsDataTable\";\nimport { useState } from \"react\";\n\nexport const ResultsSegment = ({ apiResult, reference }) => {\n  // const fonts = [\n  //   \"Montserrat\",\n  //   \"Roboto\",\n  //   \"Lato\",\n  //   \"Open Sans\",\n  //   \"Source Sans Pro\",\n  //   \"Noto Sans\",\n  // ];\n  // const fontOptions = fonts.map((font) => {\n  //   return {\n  //     key: font,\n  //     value: font,\n  //     text: font,\n  //     style: { fontFamily: font },\n  //   };\n  // });\n  // const [fontChoice, setFontChoice] = useState(fonts[0]);\n  // function handleSelectFontChoice({ value }) {\n  //   setFontChoice(value);\n  // }\n\n  const panesBlueprint = [\n    {\n      menuItem: \"Heights\",\n      measurementName: \"height\",\n      key: \"Heights\",\n      data: apiResult[reference].height,\n      disabled: apiResult[reference].height.length === 0,\n    },\n    {\n      menuItem: \"Weights\",\n      measurementName: \"weight\",\n      key: \"Weights\",\n      data: apiResult[reference].weight,\n      disabled: apiResult[reference].weight.length === 0,\n    },\n    {\n      menuItem: \"BMIs\",\n      measurementName: \"bmi\",\n      key: \"BMIs\",\n      data: apiResult[reference].bmi,\n      disabled: apiResult[reference].bmi.length === 0,\n    },\n    {\n      menuItem: \"Head Circumferences\",\n      measurementName: \"ofc\",\n      key: \"Head Circumferences\",\n      data: apiResult[reference].ofc,\n      disabled: apiResult[reference].ofc.length === 0,\n    },\n  ];\n\n  const [choice, setChoice] = useState(0);\n\n  function handleSelectMeasurementChoice(selection) {\n    setChoice(selection.activeIndex);\n  }\n\n  const chronologicalStyles = {\n    fontStyle: \"italic\",\n    color: \"#6c757d\",\n  };\n\n  const panes = panesBlueprint.map((details, index) => {\n    return {\n      menuItem: (\n        <Menu.Item disabled={details.disabled} key={details.measurementName}>\n          {details.menuItem}\n        </Menu.Item>\n      ),\n      render: () => {\n        return (\n          <Tab.Pane key={details.measurementName} attached=\"top\">\n            <ResultsDataTable\n              dataTitle={details.measurementName}\n              data={details.data}\n              chronologicalStyles={chronologicalStyles}\n              // fontChoice={fontChoice}\n            />\n          </Tab.Pane>\n        );\n      },\n    };\n  });\n\n  return (\n    <>\n      <Segment>\n        <Tab\n          key=\"tabPanes\"\n          menu={{\n            attached: \"top\",\n            secondary: true,\n            pointing: true,\n          }}\n          panes={panes}\n          activeIndex={choice}\n          onTabChange={(e, choice) => handleSelectMeasurementChoice(choice)}\n        />\n        {/* </Form.Field> */}\n        {/* <Form.Field>\n            <Header as=\"h5\" textAlign=\"left\">\n              Data Table Font\n            </Header>\n            <Select\n              selection\n              options={fontOptions}\n              defaultValue={\"Montserrat\"}\n              onChange={(e, choice) => handleSelectFontChoice(choice)}\n            ></Select>\n          </Form.Field>\n        </Form> */}\n      </Segment>\n    </>\n  );\n};\n","import { Button, Modal } from \"semantic-ui-react\";\n\nexport const ErrorModal = ({\n  title,\n  body,\n  handleClose,\n  visible,\n  handleCancel,\n}) => {\n  const showCancel = handleCancel ? true : false;\n  return (\n    <Modal title={title} open={visible} size=\"small\" closeOnEscape={true}>\n      <Modal.Header>{title}</Modal.Header>\n      <Modal.Content>{body}</Modal.Content>\n      <Modal.Actions>\n        <Button negative onClick={handleClose}>\n          OK\n        </Button>\n        {showCancel && <Button onClick={handleCancel}>Cancel</Button>}\n      </Modal.Actions>\n    </Modal>\n  );\n};\n","import { Select } from \"semantic-ui-react\";\n\nfunction IntervalTypeSelect(props) {\n  return (\n    <Select\n      name=\"interval\"\n      placeholder=\"days\"\n      value={props.intervalType}\n      onChange={props.handleChangeIntervalType}\n      options={props.intervalTypeOptions}\n    />\n  );\n}\n\nexport default IntervalTypeSelect;\n","const Slider = (props) => {\n  return (\n    <div style={{ textAlign: \"left\" }}>\n      <label style={{ padding: \"10px\" }}>{props.min} </label>\n\n      <input\n        type=\"range\"\n        min={props.min}\n        max={props.max}\n        value={props.value}\n        step={props.step}\n        className=\"slider\"\n        onChange={(e) => props.onChange(e.target.value)}\n      />\n\n      <label style={{ padding: \"10px\" }}>{props.max}</label>\n\n      <h5 style={{ display: \"inline\" }}>\n        {props.label}: {props.value} {props.isPercentage ? \"%\" : \"SDS\"}\n      </h5>\n    </div>\n  );\n};\n\nexport default Slider;\n","const intervalTypeOptions = [\n    { key: 'd', value: 'days', text: 'Days', disabled: false },\n    { key: 'w', value: 'weeks', text: 'Weeks', disabled: false },\n    { key: 'm', value: 'months', text: 'Months', disabled: false },\n    { key: 'y', value: 'years', text: 'Years', disabled: false },\n];\nexport default intervalTypeOptions;\n","import { useState, useEffect } from \"react\";\n\nimport { Form, Input, Header, Checkbox, Button } from \"semantic-ui-react\";\n\nimport GestationSelect from \"./subcomponents/GestationSelect\";\nimport IntervalTypeSelect from \"./subcomponents/IntervalSelect\";\nimport MeasurementMethodSelect from \"./subcomponents/MeasurementMethodSelect\";\nimport ReferenceSelect from \"./subcomponents/ReferenceSelect\";\nimport SexSelect from \"./subcomponents/SexChoice\";\nimport Slider from \"./subcomponents/Slider\";\nimport UtilitiesForm from \"./subcomponents/UtilitiesForm\";\n\nimport referenceOptions from \"../selectData/referenceOptions\";\nimport sexOptions from \"../selectData/sexOptions\";\nimport measurementOptions from \"../selectData/measurementOptions\";\nimport intervalOptions from \"../selectData/intervalOptions\";\nimport ErrorText from \"./subcomponents/ErrorText\";\n\nconst FictionalChildForm = (props) => {\n  const [weeks, setWeeks] = useState(40);\n  const [days, setDays] = useState(0);\n  const [startingAge, setStartingAge] = useState(\"1\");\n  const [endingAge, setEndingAge] = useState(\"20\");\n  const [intervalType, setIntervalType] = useState(\"years\");\n  const [interval, setInterval] = useState(\"1\");\n  const [driftFlag, setDriftFlag] = useState(false);\n  const [drift, setDrift] = useState(0.01);\n  const [noiseFlag, setNoiseFlag] = useState(false);\n  const [noise, setNoise] = useState(1.0); // note this is a percentage must be converted back to a decimal for the API\n  const [startSDS, setStartSDS] = useState(\"0\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const handleBigButtonPress = ({ type }) => {\n    if (type === \"submit\") {\n      const values = {\n        measurement_method: props.globalState.measurementMethod,\n        sex: props.globalState.sex,\n        start_chronological_age: startingAge,\n        end_age: endingAge,\n        gestation_weeks: weeks,\n        gestation_days: days,\n        measurement_interval_type: intervalType,\n        measurement_interval_number: interval,\n        start_sds: startSDS,\n        noise: noiseFlag,\n        drift_range: drift,\n        drift: driftFlag,\n        noise_range: noise,\n        reference: props.globalState.reference,\n      };\n      props.fictionalFormDataSubmit(values);\n    } else {\n      props.updateGlobalState(\"resetCurrent\", true);\n    }\n  };\n\n  const handleChangeReference = (val) => {\n    props.updateGlobalState(\"reference\", val.value);\n  };\n\n  const handleChangeMeasurementMethod = (val) => {\n    props.updateGlobalState(\"measurementMethod\", val);\n  };\n\n  const handleSexChange = (val) => {\n    props.updateGlobalState(\"sex\", val.value);\n  };\n\n  const handleGestationChange = ({ name, value }) => {\n    if (name === \"gestation_weeks\") {\n      setWeeks(value);\n      if (value === 42) {\n        setDays(0);\n      }\n    } else if (name === \"gestation_days\") {\n      if (weeks === 42) {\n        setDays(0);\n      } else {\n        setDays(value);\n      }\n    }\n  };\n\n  const handleObservationChange = (e, { name, value }) => {\n    if (name === \"start_age\") {\n      setStartingAge(value);\n    }\n    if (name === \"end_age\") {\n      setEndingAge(value);\n    }\n    if (name === \"interval_value\") {\n      setInterval(value);\n    }\n    if (name === \"startSDS\") {\n      setStartSDS(value);\n    }\n  };\n\n  const handleChangeIntervalType = (e, { value }) => {\n    setIntervalType(value);\n  };\n\n  const handleSDSDriftChange = (e, { checked }) => {\n    setDriftFlag(checked);\n  };\n\n  const handleDriftChange = (val) => {\n    setDrift(val);\n  };\n\n  const handleNoiseChange = (val) => {\n    setNoise(val);\n  };\n\n  const handleNoiseFlag = (e, { checked }) => {\n    setNoiseFlag(checked);\n  };\n\n  const makeDynamic = (option) => {\n    const newDisabled = props.globalState.disabled[option.key];\n    return { ...option, disabled: newDisabled };\n  };\n\n  const dynamicMeasurementOptions = measurementOptions.map(makeDynamic);\n\n  const dynamicSexOptions = sexOptions.map(makeDynamic);\n\n  const handleMaternalHeight = (event, data) => {\n    const paternalHeight =\n      props.globalState[\"parentalHeights\"][\"height_paternal\"];\n    const heights = {\n      height_maternal: data.value,\n      height_paternal: paternalHeight,\n    };\n    props.updateGlobalState(\"parentalHeights\", heights);\n  };\n\n  const handlePaternalHeight = (event, data) => {\n    const maternalHeight =\n      props.globalState[\"parentalHeights\"][\"height_maternal\"];\n    const heights = {\n      height_maternal: maternalHeight,\n      height_paternal: data.value,\n    };\n    props.updateGlobalState(\"parentalHeights\", heights);\n  };\n\n  const removeMidParentalHeight = () => {\n    props.updateGlobalState(\"mid-parental-height\", \"reset\");\n  };\n\n  const midParentalHeightDataPresent = () => {\n    if (props.globalState[\"mid-parental-height\"].mid_parental_height) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const handleUtilitiesDataSubmit = (event) => {\n    if (event.target[0].value < 100 && event.target[1].value < 100) {\n      return;\n    }\n    const formData = {\n      height_maternal: event.target[0].value,\n      height_paternal: event.target[1].value,\n      sex: props.globalState[\"sex\"],\n    };\n    props.updateGlobalState(\"isMidParentalHeightRequest\", true);\n    props.updateGlobalState(\"parentalHeights\", {\n      maternalHeight: event.target[0].value,\n      paternalHeight: event.target[1].value,\n    });\n    console.log(props);\n    props.handleUtilitiesFormDataSubmit(formData);\n  };\n\n  useEffect(() => {\n    switch (true) {\n      case Number(startingAge) < 0:\n        setErrorMessage(\"Starting age must be above 0.\");\n        break;\n      case Number(endingAge) > 20:\n        setErrorMessage(\"Ending age must be under 20.\");\n        break;\n      case Number.isNaN(Number(startingAge)):\n      case Number.isNaN(Number(endingAge)):\n      case Number.isNaN(Number(interval)):\n      case Number.isNaN(Number(startSDS)):\n        setErrorMessage(\"Please check that all entries have valid numbers.\");\n        break;\n      case startingAge === \"\":\n      case endingAge === \"\":\n      case interval === \"\":\n      case startSDS === \"\":\n        setErrorMessage(\"Please check that all entries are filled in.\");\n        break;\n      default:\n        setErrorMessage(\"\");\n    }\n  }, [startingAge, endingAge, interval, startSDS]);\n\n  return (\n    <div>\n      <Form onSubmit={handleBigButtonPress}>\n        <Form.Field>\n          <ReferenceSelect\n            handleChangeReference={handleChangeReference}\n            reference={props.globalState.reference}\n            referenceOptions={referenceOptions}\n          />\n        </Form.Field>\n        <Form.Field>\n          <MeasurementMethodSelect\n            handleChangeMeasurementMethod={handleChangeMeasurementMethod}\n            measurementMethod={props.globalState.measurementMethod}\n            measurementOptions={dynamicMeasurementOptions}\n          />\n        </Form.Field>\n        <Form.Field>\n          <SexSelect\n            handleSexChange={handleSexChange}\n            sex={props.globalState.sex}\n            sexOptions={dynamicSexOptions}\n          />\n        </Form.Field>\n        <Form.Field>\n          <GestationSelect\n            handleGestationChange={handleGestationChange}\n            weeks={weeks}\n            days={days}\n          />\n        </Form.Field>\n        <Header as=\"h5\" textAlign={\"left\"}>\n          Ages\n        </Header>\n        <Form.Field>\n          <Input\n            type=\"decimal\"\n            name=\"start_age\"\n            placeholder=\"Starting Decimal Age\"\n            value={startingAge}\n            label={{\n              content: \"years\",\n              basic: true,\n              color: \"black\",\n            }}\n            labelPosition=\"right\"\n            onChange={handleObservationChange}\n          ></Input>\n        </Form.Field>\n        <Form.Field>\n          <Input\n            type=\"decimal\"\n            name=\"end_age\"\n            placeholder=\"Ending Decimal Age\"\n            value={endingAge}\n            label={{\n              content: \"years\",\n              basic: true,\n              color: \"black\",\n            }}\n            labelPosition=\"right\"\n            onChange={handleObservationChange}\n          ></Input>\n        </Form.Field>\n        <Header as=\"h5\" textAlign={\"left\"}>\n          Intervals\n        </Header>\n        <Form.Field>\n          <IntervalTypeSelect\n            handleChangeIntervalType={handleChangeIntervalType}\n            intervalType={intervalType}\n            intervalTypeOptions={intervalOptions}\n          />\n        </Form.Field>\n        <Form.Field>\n          <Input\n            type=\"decimal\"\n            name=\"interval_value\"\n            placeholder=\"Interval amount\"\n            value={interval}\n            onChange={handleObservationChange}\n          />\n        </Form.Field>\n        <Header as=\"h5\" textAlign={\"left\"}>\n          SDS (Standard Deviation Score)\n        </Header>\n        <Form.Field>\n          <Form.Input\n            label=\"Starting SDS\"\n            type=\"decimal\"\n            name=\"startSDS\"\n            placeholder=\"SDS\"\n            value={startSDS}\n            labelPosition=\"left\"\n            onChange={handleObservationChange}\n          ></Form.Input>\n        </Form.Field>\n        <ErrorText errorText={errorMessage} />\n        <Form.Field width={14} style={{ textAlign: \"left\" }}>\n          <Checkbox\n            toggle\n            label=\"Add SDS drift?\"\n            onChange={handleSDSDriftChange}\n          />\n        </Form.Field>\n        {driftFlag && (\n          <Form.Field width={14}>\n            <Slider\n              isPercentage={false}\n              min={-3}\n              max={3}\n              value={drift}\n              step={0.01}\n              onChange={handleDriftChange}\n              label=\"Drift\"\n            />\n          </Form.Field>\n        )}\n        {/* </Form.Group> */}\n\n        <Form.Field width={14} style={{ textAlign: \"left\" }}>\n          <Checkbox\n            toggle\n            label=\"Simulate Measurement Error?\"\n            onChange={handleNoiseFlag}\n          />\n        </Form.Field>\n        {noiseFlag && (\n          <Form.Field width={14}>\n            <Slider\n              isPercentage={true}\n              min={0}\n              max={10}\n              value={noise}\n              step={0.1}\n              onChange={handleNoiseChange}\n              label=\"Percentage Error\"\n            />\n          </Form.Field>\n        )}\n        <Form.Field>\n          <Button\n            content=\"Generate Growth Data\"\n            type=\"submit\"\n            fluid\n            color=\"black\"\n            icon=\"line graph\"\n            labelPosition=\"right\"\n            disabled={errorMessage !== \"\"}\n          />\n        </Form.Field>\n        {props.globalState.isDataPresent && (\n          <Form.Field>\n            <Button\n              content=\"Reset Chart\"\n              icon=\"power off\"\n              onClick={handleBigButtonPress}\n              style={{ width: \"100%\" }}\n              type=\"reset\"\n            />\n          </Form.Field>\n        )}\n      </Form>\n\n      {props.globalState.reference === \"uk-who\" && (\n        <UtilitiesForm\n          utilitiesFormDataSubmit={handleUtilitiesDataSubmit}\n          changeMaternalHeight={handleMaternalHeight}\n          changePaternalHeight={handlePaternalHeight}\n          maternalHeight={props.globalState.parentalHeights.height_maternal}\n          paternalHeight={props.globalState.parentalHeights.height_paternal}\n          removeMidParentalHeight={removeMidParentalHeight}\n          midParentalHeightDataPresent={midParentalHeightDataPresent()}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default FictionalChildForm;\n","import { useEffect, useState, useCallback } from \"react\";\nimport axios from \"axios\";\n\nimport deepCopy from \"../functions/deepCopy\";\n\nconst fetchFromApi = async (inputParameters, reference, mode) => {\n  /*\n  This code snippet makes an API call direct to the digital growth charts server\n  It uses a development API key stored in .env which is unsafe\n  In due course this endpoint will be deprecated.\n  */\n  //  For this to work in development use http://127.0.0.1:8000 rather than localhost\n  //\n  const prod_url = process.env.REACT_APP_GROWTH_API_BASEURL;\n  // const prod_url = \"http://127.0.0.1:8000\";\n\n  let url = `${prod_url}/${reference}/${mode}`;\n  if (mode === \"mid-parental-height\") {\n    url = `${prod_url}/utilities/${mode}`;\n  }\n\n  const headers = process.env.REACT_APP_API_KEY\n    ? {\n        \"Content-Type\": \"application/json\",\n        \"Subscription-Key\": process.env.REACT_APP_API_KEY,\n      }\n    : { \"Content-Type\": \"application/json\" };\n  const response = await axios({\n    url: url,\n    data: inputParameters,\n    method: \"POST\",\n    headers,\n  });\n\n  /*\n  This code snippet directs the form data to a node server which holds the API key and makes the \n  call to the digital growth chart server.\n  Cors is used to constrain accepted domains to the react demo client\n  */\n  // const nodeURL = 'http://localhost:8001/rcpchgrowth';\n  // const nodeURL = `http://localhost:8000/${reference}/${mode}`\n\n  // const options = {\n  //     // reference: reference,\n  //     // mode: mode,\n  //     formdata: inputParameters,\n  // };\n\n  // const headers = { 'Content-Type': 'application/json' };\n  // const response = await axios({\n  //     url: nodeURL,\n  //     data: options,\n  //     method: 'POST',\n  //     headers: headers,\n  // });\n\n  return response.data;\n};\n\nconst makeInitialState = () => {\n  const midParentalHeights = {\n    mid_parental_height: null,\n    mid_parental_height_sds: null,\n    mid_parental_height_centile: null,\n    mid_parental_height_centile_data: null,\n    mid_parental_height_lower_centile_data: null,\n    mid_parental_height_upper_centile_data: null,\n    mid_parental_height_lower_value: null,\n    mid_parental_height_upper_value: null,\n  };\n\n  const measurements = {\n    turner: {\n      height: [],\n      weight: [],\n      bmi: [],\n      ofc: [],\n    },\n    \"trisomy-21\": {\n      height: [],\n      weight: [],\n      bmi: [],\n      ofc: [],\n    },\n    \"uk-who\": {\n      height: [],\n      weight: [],\n      bmi: [],\n      ofc: [],\n      parentalHeights: {\n        height_maternal: null,\n        height_paternal: null,\n        sex: null,\n      },\n      midParentalHeights: midParentalHeights,\n    },\n  };\n\n  return {\n    calculation: {\n      input: measurements,\n      output: measurements,\n    },\n    \"fictional-child-data\": {\n      input: measurements,\n      output: measurements,\n    },\n    errors: { errors: false, message: \"\" },\n    isLoading: false,\n    isMidparentalCalculation: false,\n  };\n};\n\nconst useRcpchApi = (measurementMethod, reference, mode = \"calculation\") => {\n  const [apiState, setApiState] = useState(makeInitialState);\n  const fetchResult = useCallback(\n    (newInput) => {\n      setApiState((old) => {\n        let mutable = deepCopy(old);\n        if (newInput.height_maternal && newInput.height_paternal) {\n          mutable[mode].input[reference][\"parentalHeights\"] = newInput;\n          mutable.isMidparentalCalculation = true;\n        } else {\n          mutable[mode].input[reference][measurementMethod].push(newInput);\n        }\n        mutable.isLoading = true;\n        return mutable;\n      });\n    },\n    [measurementMethod, mode, reference]\n  );\n\n  /* \n  Remove last item from arrays. Defaults to removing last item from measurements array only. \n  If 'both' parameter is set to true, removes last item from measurements array and \n  results array.\n  */\n  const removeLastFromArrays = useCallback(\n    (oldState, both = false) => {\n      const newInput = deepCopy(\n        oldState[mode].input[reference][measurementMethod]\n      );\n      newInput.pop();\n      let newOutput = null;\n      if (both) {\n        newOutput = oldState[mode].output[reference][measurementMethod];\n        newOutput.pop();\n      }\n      return { newInput, newOutput };\n    },\n    [measurementMethod, mode, reference]\n  );\n\n  // as above but updates state as well (used as a callback)\n  const removeLastActiveItem = useCallback(\n    (both) => {\n      setApiState((old) => {\n        const mutable = deepCopy(old);\n        const { newInput, newOutput } = removeLastFromArrays(old, both);\n        mutable[mode].input[reference][measurementMethod] = newInput;\n        if (newOutput) {\n          mutable[mode].output[reference][measurementMethod] = newOutput;\n        }\n        return mutable;\n      });\n    },\n    [setApiState, removeLastFromArrays, mode, reference, measurementMethod]\n  );\n\n  const clearBothActiveArrays = useCallback(() => {\n    setApiState((old) => {\n      const mutable = deepCopy(old);\n      mutable[mode].input[reference][measurementMethod] = [];\n      mutable[mode].output[reference][measurementMethod] = [];\n      return mutable;\n    });\n  }, [measurementMethod, mode, reference]);\n\n  const clearApiErrors = useCallback(() => {\n    setApiState((old) => {\n      const mutable = deepCopy(old);\n      mutable.errors = { errors: false, message: \"\" };\n      return mutable;\n    });\n  }, []);\n\n  useEffect(() => {\n    let ignore = false;\n    if (apiState.isLoading) {\n      let relevantArray;\n      let latestInput;\n\n      if (apiState[\"isMidparentalCalculation\"]) {\n        latestInput = apiState[mode].input[reference][\"parentalHeights\"];\n      } else {\n        relevantArray = apiState[mode].input[reference][measurementMethod];\n        latestInput = deepCopy(relevantArray[relevantArray.length - 1]);\n      }\n\n      fetchFromApi(\n        latestInput,\n        reference,\n        apiState[\"isMidparentalCalculation\"] ? \"mid-parental-height\" : mode\n      )\n        .then((result) => {\n          if (!ignore) {\n            setApiState((old) => {\n              const mutable = deepCopy(old);\n              let measurementError = \"\";\n              let resultAsArray = null;\n              if (mutable.isMidparentalCalculation) {\n                mutable.errors = {\n                  errors: false,\n                  message: \"success\",\n                };\n                mutable[mode].input[reference][\"parentalheights\"] = latestInput;\n                mutable[mode].output[reference][\"midParentalHeights\"] = result;\n                mutable.isLoading = false;\n                mutable.isMidparentalCalculation = false;\n                return mutable;\n              }\n              if (mode === \"fictional-child-data\") {\n                resultAsArray = result;\n              }\n              if (mode === \"calculation\") {\n                resultAsArray = mutable[mode].output[reference][\n                  measurementMethod\n                ].concat([result]);\n              }\n              for (const singleResult of resultAsArray) {\n                if (resultAsArray.length < 2) {\n                  // only register errors for individual measurements\n                  measurementError =\n                    singleResult.measurement_calculated_values\n                      .corrected_measurement_error ||\n                    singleResult.measurement_calculated_values\n                      .chronological_measurement_error;\n                }\n                if (measurementError) {\n                  if (mode === \"fictional-child-data\") {\n                    mutable[mode].input[reference][measurementMethod] = [];\n                  } else {\n                    const { newInput } = removeLastFromArrays(old);\n                    mutable[mode].input[reference][measurementMethod] =\n                      newInput;\n                  }\n                  mutable.errors = {\n                    errors: true,\n                    message: `The server could not process the measurements. Details: ${measurementError}`,\n                  };\n                  mutable.isLoading = false;\n                  return mutable;\n                }\n              }\n              mutable[mode].output[reference][measurementMethod] =\n                resultAsArray;\n              mutable.errors = {\n                errors: false,\n                message: \"success\",\n              };\n              mutable.isLoading = false;\n              return mutable;\n            });\n          }\n        })\n        .catch((error) => {\n          setApiState((old) => {\n            const mutable = deepCopy(old);\n            const { newInput } = removeLastFromArrays(old);\n            mutable[mode].input[reference][measurementMethod] = newInput;\n            const errorForUser = `There has been a problem fetching the result from the server. Error details: ${error.message}`;\n            mutable.errors = {\n              errors: true,\n              message: errorForUser,\n            };\n            mutable.isLoading = false;\n            return mutable;\n          });\n        });\n    }\n    return () => {\n      ignore = true;\n    };\n  }, [apiState, measurementMethod, mode, reference, removeLastFromArrays]);\n\n  return {\n    fetchResult,\n    removeLastActiveItem,\n    clearBothActiveArrays,\n    clearApiErrors,\n    measurements: apiState[mode].input,\n    results: apiState[mode].output,\n    apiErrors: apiState.errors,\n    isLoading: apiState.isLoading,\n  };\n};\n\nexport default useRcpchApi;\n","import { useState, useCallback } from 'react';\nimport deepCopy from '../functions/deepCopy';\nimport { units } from '../functions/units';\n\nconst makeGlobalState = () => {\n    return {\n        mode: 'calculation',\n        modeActiveIndex: 0,\n        reference: 'uk-who',\n        measurementMethod: 'height',\n        units: 'cm',\n        measurementMethodActiveIndex: 0,\n        sex: 'male',\n        parentalHeights: {\n            height_maternal: null,\n            height_paternal: null,\n        },\n        'mid-parental-height': {\n            mid_parental_height: null,\n            mid_parental_height_sds: null,\n            mid_parental_height_centile: null,\n            mid_parental_height_centile_data: null,\n            mid_parental_height_lower_centile_data: null,\n            mid_parental_height_upper_centile_data: null,\n            mid_parental_height_lower_value: null,\n            mid_parental_height_upper_value: null,\n        },\n        disabled: {\n            height: false,\n            weight: false,\n            bmi: false,\n            ofc: false,\n            male: false,\n            female: false,\n        },\n        errors: {\n            errors: false,\n            message: '',\n        },\n        clearMeasurement: false,\n        resetCurrent: false,\n        undoLast: false,\n        isDataPresent: false,\n    };\n};\n\nconst measurementMethodActiveIndexLookup = [\n    'height',\n    'weight',\n    'bmi',\n    'ofc',\n    'sds',\n];\n\nconst useGlobalState = () => {\n    const [globalState, setGlobalState] = useState(makeGlobalState);\n    const makeGlobalStateUpdater = useCallback((results) => {\n        return (name, newValue) => {\n            setGlobalState((old) => {\n                const mutable = deepCopy(old);\n                switch (name) {\n                    case 'mode':\n                        mutable.mode = newValue;\n                        mutable.modeActiveIndex =\n                            newValue === 'calculation' ? 0 : 1;\n                        break;\n                    case 'modeActiveIndex':\n                        mutable.modeActiveIndex = newValue;\n                        switch (newValue) {\n                            case 0:\n                                mutable.mode = 'calculation';\n                                break;\n                            case 1:\n                                mutable.mode = 'fictional-child-data';\n                                break;\n                            default:\n                                mutable.mode = 'calculation';\n                                break;\n                        }\n                        break;\n                    case 'reference':\n                        mutable.reference = newValue;\n                        if (newValue === 'turner') {\n                            mutable.disabled = {\n                                height: false,\n                                weight: true,\n                                bmi: true,\n                                ofc: true,\n                                male: true,\n                                female: false,\n                            };\n                            mutable.measurementMethod = 'height';\n                            mutable.measurementMethodActiveIndex = 0;\n                            mutable.sex = 'female';\n                        } else {\n                            if (\n                                results[newValue][mutable.measurementMethod]\n                                    .length > 0 &&\n                                results[newValue][mutable.measurementMethod][0]\n                                    .birth_data.sex !== mutable.sex\n                            ) {\n                                mutable.sex =\n                                    results[newValue][\n                                        mutable.measurementMethod\n                                    ][0].birth_data.sex;\n                            }\n                            mutable.disabled = {\n                                height: false,\n                                weight: false,\n                                bmi: false,\n                                ofc: false,\n                                male: false,\n                                female: false,\n                            };\n                        }\n                        break;\n                    case 'measurementMethod':\n                        mutable.measurementMethod = newValue;\n                        mutable.units = units(newValue);\n                        for (\n                            let i = 0;\n                            i < measurementMethodActiveIndexLookup.length;\n                            i++\n                        ) {\n                            if (\n                                measurementMethodActiveIndexLookup[i] ===\n                                newValue\n                            ) {\n                                mutable.measurementMethodActiveIndex = i;\n                                break;\n                            }\n                        }\n                        break;\n                    case 'measurementMethodActiveIndex':\n                        const tempMeasurementMethod =\n                            measurementMethodActiveIndexLookup[newValue];\n                        if (\n                            mutable.reference === 'turner' &&\n                            tempMeasurementMethod !== 'height'\n                        ) {\n                            mutable.errors = {\n                                errors: true,\n                                message: 'Unable to change measurement type',\n                            };\n                        } else {\n                            mutable.measurementMethodActiveIndex = newValue;\n                            mutable.measurementMethod =\n                                measurementMethodActiveIndexLookup[newValue];\n                        }\n                        break;\n                    case 'sex':\n                        const existingResults = [\n                            ...results[mutable.reference][\n                                mutable.measurementMethod\n                            ],\n                        ];\n                        if (existingResults.length > 0) {\n                            for (const oldResult of existingResults) {\n                                if (newValue !== oldResult.sex) {\n                                    mutable.errors = {\n                                        errors: true,\n                                        message: 'Unable to change sex',\n                                    };\n                                    break;\n                                }\n                            }\n                        }\n                        if (!mutable.errors.message) {\n                            mutable.sex = newValue;\n                        }\n                        break;\n                    // case \"mid-parental-height\":\n                    //   if (newValue===\"reset\"){\n                    //     const empty = {\n                    //       height_maternal: null,\n                    //       height_paternal: null\n                    //     }\n                    //     mutable.parentalHeights = empty;\n                    //   } else {\n                    //     mutable.midparentalHeightData = newValue;\n                    //   }\n                    //   break;\n                    default:\n                        mutable[name] = newValue;\n                }\n                return mutable;\n            });\n        };\n    }, []);\n    return {\n        globalState,\n        makeGlobalStateUpdater,\n    };\n};\n\nexport default useGlobalState;\n","// React\nimport { useState, useEffect, useMemo, Fragment } from \"react\";\n\n//themes\n// import RCPCHTheme1 from \"../components/chartThemes/rcpchTheme1\";\n// import RCPCHTheme2 from \"../components/chartThemes/rcpchTheme2\";\n// import RCPCHTheme3 from \"../components/chartThemes/rcpchTheme3\";\n// import RCPCHThemeMonochrome from \"../components/chartThemes/rcpchThemeMonochrome\";\n// import RCPCHThemeTraditionalBoy from \"../components/chartThemes/RCPCHThemeTraditionalBoy\";\n// import RCPCHThemeTraditionalGirl from \"../components/chartThemes/RCPCHThemeTraditionalGirl\";\n\n// Semantic UI React\nimport {\n  Grid,\n  Segment,\n  Tab,\n  Dropdown,\n  Button,\n  Message,\n  Container,\n  Checkbox,\n} from \"semantic-ui-react\";\n\nimport ChartData from \"../api/Chart\";\nimport MeasurementForm from \"../components/MeasurementForm\";\nimport deepCopy from \"../functions/deepCopy\";\nimport { ResultsSegment } from \"../components/subcomponents/ResultsSegment\";\nimport { ErrorModal } from \"../components/subcomponents/ErrorModal\";\nimport \"../index.css\";\nimport FictionalChildForm from \"./FictionalChildForm\";\nimport useRcpchApi from \"../hooks/useRcpchApi\";\nimport useGlobalState from \"../hooks/useGlobalState\";\n\n// const defaultTheme = RCPCHThemeMonochrome;\n\nfunction MeasurementSegment() {\n  // const [chartStyle, setChartSyle] = useState(defaultTheme.chart);\n  // const [axisStyle, setAxisStyle] = useState(defaultTheme.axes);\n  // const [centileStyle, setCentileStyle] = useState(defaultTheme.centiles);\n  // const [sdsStyle, setSDSStyle] = useState(defaultTheme.sds);\n  const [centile, setCentile] = useState(true);\n  // const [measurementStyle, setMeasurementStyle] = useState(\n  //   defaultTheme.measurements\n  // );\n  const [theme, setTheme] = useState({\n    value: \"monochrome\",\n    text: \"Monochrome\",\n  });\n\n  const [flip, setFlip] = useState(false); // flag to determine if results or chart showing\n  const [errorModal, setErrorModal] = useState(InitalErrorModalState());\n  const { globalState, makeGlobalStateUpdater } = useGlobalState();\n  const [clinician, setClinician] = useState(true);\n\n  const {\n    mode,\n    modeActiveIndex,\n    reference,\n    measurementMethod,\n    measurementMethodActiveIndex,\n    sex,\n    disabled,\n    errors,\n    resetCurrent,\n    undoLast,\n  } = globalState;\n\n  const {\n    fetchResult,\n    removeLastActiveItem,\n    clearBothActiveArrays,\n    clearApiErrors,\n    measurements,\n    results,\n    apiErrors,\n    isLoading,\n  } = useRcpchApi(measurementMethod, reference, mode);\n\n  const updateGlobalState = useMemo(\n    () => makeGlobalStateUpdater(results),\n    [results, makeGlobalStateUpdater]\n  );\n\n  useEffect(() => {\n    if (apiErrors.errors) {\n      setErrorModal({\n        visible: true,\n        title: \"Unable to plot\",\n        body: apiErrors.message,\n        handleClose: () => {\n          clearApiErrors();\n          setErrorModal(InitalErrorModalState());\n        },\n      });\n    } else if (apiErrors.message === \"success\") {\n      updateGlobalState(\"clearMeasurement\", true);\n      clearApiErrors();\n    }\n    if (errors.errors) {\n      let body = \"Only height data is available for Turner Syndrome.\";\n      if (errors.message === \"Unable to change sex\") {\n        body =\n          \"Each chart can only display measurements from one patient at a time. Please reset the chart before entering measurements from a new patient.\";\n      }\n      setErrorModal({\n        visible: true,\n        title: errors.message,\n        body: body,\n        handleClose: () => setErrorModal(InitalErrorModalState()),\n      });\n      updateGlobalState(\"errors\", { errors: false, message: \"\" });\n    }\n  }, [errors, apiErrors, clearApiErrors, updateGlobalState]);\n\n  // useEffect(() => {\n  //   let selectedTheme = RCPCHThemeMonochrome;\n  //   if (theme.value === \"trad\") {\n  //     selectedTheme =\n  //       sex === \"male\" ? RCPCHThemeTraditionalBoy : RCPCHThemeTraditionalGirl;\n  //   }\n  //   if (theme.value === \"tanner1\") {\n  //     selectedTheme = RCPCHTheme1;\n  //   }\n  //   if (theme.value === \"tanner2\") {\n  //     selectedTheme = RCPCHTheme2;\n  //   }\n  //   if (theme.value === \"tanner3\") {\n  //     selectedTheme = RCPCHTheme3;\n  //   }\n  //   setCentileStyle(selectedTheme.centiles);\n  //   setChartSyle(selectedTheme.chart);\n  //   setMeasurementStyle(selectedTheme.measurements);\n  //   setAxisStyle(selectedTheme.axes);\n  // }, [sex, theme.value]);\n\n  useEffect(() => {\n    if (results[reference][measurementMethod].length > 0) {\n      updateGlobalState(\"isDataPresent\", true);\n    } else {\n      updateGlobalState(\"isDataPresent\", false);\n    }\n  }, [results, reference, measurementMethod, updateGlobalState]);\n\n  if (resetCurrent) {\n    setErrorModal({\n      visible: true,\n      title: \"Are you sure you want to reset?\",\n      body: \"This will remove all measurements from the current chart.\",\n      handleCancel: () => setErrorModal(InitalErrorModalState()),\n      handleClose: () => {\n        clearBothActiveArrays();\n        setErrorModal(InitalErrorModalState());\n        updateGlobalState(\"mid-parental-height\", \"empty\");\n      },\n    });\n    updateGlobalState(\"resetCurrent\", false);\n  }\n\n  if (undoLast) {\n    setErrorModal({\n      visible: true,\n      title: \"Are you sure you want to remove the last measurement?\",\n      body: \"This will remove the last measurement entered on the chart.\",\n      handleCancel: () => setErrorModal(InitalErrorModalState()),\n      handleClose: () => {\n        removeLastActiveItem(true);\n        setErrorModal(InitalErrorModalState());\n      },\n    });\n    updateGlobalState(\"undoLast\", false);\n  }\n\n  const handleTabChange = (e, { activeIndex }) => {\n    updateGlobalState(\"measurementMethodActiveIndex\", activeIndex);\n  };\n\n  const handleModeChange = (e, { activeIndex }) => {\n    updateGlobalState(\"modeActiveIndex\", activeIndex);\n  };\n\n  const fictionalFormDataSubmit = (formData) => {\n    // convert percentage back to a decimal for the API\n    formData.noise_range = formData.noise_range / 100;\n    fetchResult(formData);\n  };\n\n  const utilitiesFormDataSubmit = (formData) => {\n    // delegate function from midparental height calculation\n    fetchResult(formData);\n    if (isLoading) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const handleChangeTheme = (event, { value }) => {\n    // callback from select theme\n    // matches themeOptions by key and returns text to dropdown and value to chart for rerender in new theme\n    const selectedOption = themeOptions.find((o) => o.key === value);\n    const text = selectedOption[\"text\"];\n\n    setTheme({ value: value, text: text });\n  };\n\n  const handleFlipResults = () => {\n    setFlip(!flip);\n  };\n\n  const handleCentileSDS = () => {\n    setCentile(!centile);\n  };\n\n  const handleResults = (latestResult) => {\n    // delegate function from MeasurementForm\n    // receives form data and stores in the correct measurement array\n    // checks for duplicates, mismatching dobs, sexes and gestations\n    if (!isLoading) {\n      const existingResults = deepCopy(\n        measurements[reference][measurementMethod]\n      );\n      let errorString = \"\";\n      if (existingResults.length > 0) {\n        const newGestation =\n          latestResult.gestation_weeks * 7 + latestResult.gestation_days;\n        const newErrors = [];\n        for (const oldResult of existingResults) {\n          if (JSON.stringify(oldResult) === JSON.stringify(latestResult)) {\n            errorString = \"duplicate\";\n            break;\n          }\n          const oldGestation =\n            oldResult.gestation_weeks * 7 + oldResult.gestation_days;\n          if (oldResult.sex !== latestResult.sex) {\n            newErrors.push(\"differing sexes\");\n          }\n          if (oldResult.birth_date !== latestResult.birth_date) {\n            newErrors.push(\"differing date of births\");\n          }\n          if (oldGestation !== newGestation) {\n            newErrors.push(\"differing gestations\");\n          }\n          if (newErrors.length > 0) {\n            errorString = newErrors[0];\n            if (newErrors.length === 2) {\n              errorString = newErrors.join(\" and \");\n            } else if (newErrors.length === 3) {\n              errorString = `${newErrors[0]}, ${newErrors[1]} and ${newErrors[2]}`;\n            }\n            break;\n          }\n        }\n      }\n      if (errorString) {\n        if (errorString === \"duplicate\") {\n          setErrorModal({\n            visible: true,\n            title: \"Duplicate entries\",\n            body: `Please check the last measurement entry as it appears to be identical to a measurement already entered.`,\n            handleClose: () => setErrorModal(InitalErrorModalState()),\n          });\n        } else {\n          setErrorModal({\n            visible: true,\n            title: \"Please check entries\",\n            body: `Each chart can only display measurements from one patient at a time: ${errorString} were detected.`,\n            handleClose: () => setErrorModal(InitalErrorModalState()),\n          });\n        }\n        return false;\n      } else {\n        fetchResult(latestResult);\n        return true;\n      }\n    }\n  };\n\n  const panes = panesBlueprint.map((details, index) => {\n    return {\n      menuItem: details.menuItem,\n      render: () => {\n        return centile ? (\n          <Tab.Pane\n            key=\"charts\"\n            attached=\"top\"\n            disabled={disabled[details.measurementName]}\n          >\n            <ChartData\n              key={`centile-${index}`}\n              reference={reference}\n              sex={sex}\n              measurementMethod={details.measurementName}\n              measurementsArray={results[reference][details.measurementName]}\n              midParentalHeightData={results[reference][\"midParentalHeights\"]}\n              theme={theme.value}\n              isLoading={isLoading}\n              chartType=\"centile\"\n              clinicianFocus={clinician}\n            />\n          </Tab.Pane>\n        ) : (\n          <Tab.Pane attached=\"top\" key=\"sds\">\n            <ChartData\n              key={`sds-${index}`}\n              reference={reference}\n              sex={sex}\n              measurementMethod={details.measurementName}\n              measurementsArray={results[reference]}\n              midParentalHeightData={results[reference][\"midParentalHeights\"]}\n              theme={theme.value}\n              isLoading={isLoading}\n              chartType=\"sds\"\n            />\n          </Tab.Pane>\n        );\n      },\n    };\n  });\n\n  const TabPanes = () => (\n    <Tab\n      key=\"tabPanes\"\n      menu={{\n        attached: \"top\",\n        secondary: true,\n        pointing: true,\n      }}\n      panes={panes}\n      activeIndex={measurementMethodActiveIndex}\n      onTabChange={handleTabChange}\n    />\n  );\n\n  const FormPanes = [\n    {\n      key: \"measurements\",\n      menuItem: \"Measurements\",\n      render: () => (\n        <Tab.Pane attached={false} key=\"measurements\">\n          <MeasurementForm\n            handleMeasurementResult={handleResults}\n            globalState={globalState}\n            updateGlobalState={updateGlobalState}\n            className=\"measurement-form\"\n            handleUtilitiesFormDataSubmit={utilitiesFormDataSubmit}\n            // themeColour={centileStyle.centileStroke}\n          />\n        </Tab.Pane>\n      ),\n    },\n    {\n      key: \"examples\",\n      menuItem: \"Examples\",\n      render: () => (\n        <Tab.Pane key=\"examples\">\n          <FictionalChildForm\n            fictionalFormDataSubmit={fictionalFormDataSubmit}\n            globalState={globalState}\n            updateGlobalState={updateGlobalState}\n            handleUtilitiesFormDataSubmit={utilitiesFormDataSubmit}\n          />\n        </Tab.Pane>\n      ),\n    },\n  ];\n\n  const ThemeSelection = () => (\n    <span>\n      Theme{\" \"}\n      <Dropdown\n        options={themeOptions}\n        floating\n        inline\n        onChange={handleChangeTheme}\n        text={theme.text}\n      />\n    </span>\n  );\n\n  return (\n    <Fragment>\n      <Grid padded>\n        <Grid.Row>\n          <Grid.Column width={6}>\n            <Segment\n              textAlign={\"center\"}\n              color={mode === \"fictional-child-data\" ? \"black\" : null}\n            >\n              <Tab\n                key=\"measurementTabs\"\n                panes={FormPanes}\n                menu={{\n                  attached: false,\n                  secondary: true,\n                  pointing: true,\n                }}\n                onTabChange={handleModeChange}\n                activeIndex={modeActiveIndex}\n              />\n            </Segment>\n          </Grid.Column>\n          <Grid.Column width={10}>\n            <Segment color={mode === \"fictional-child-data\" ? \"black\" : null}>\n              {flip ? (\n                <ResultsSegment apiResult={results} reference={reference} />\n              ) : (\n                <div>\n                  <TabPanes />\n                </div>\n              )}\n              <Grid verticalAlign=\"middle\">\n                <Grid.Row columns={3}>\n                  <Grid.Column textAlign=\"left\" width={4}>\n                    <Checkbox\n                      radio\n                      label=\"Clinician Advice\"\n                      name=\"checkboxRadioGroup\"\n                      value={0}\n                      checked={clinician}\n                      onChange={(e, data) => setClinician(!clinician)}\n                    />\n                    <Checkbox\n                      radio\n                      label=\"Child/Family Advice\"\n                      name=\"checkboxRadioGroup\"\n                      value={1}\n                      checked={!clinician}\n                      onChange={(e, data) => setClinician(!clinician)}\n                    />\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"center\" width={4}>\n                    <ThemeSelection />\n                  </Grid.Column>\n                  <Grid.Column textAlign=\"right\" width={8}>\n                    <Button\n                      onClick={handleCentileSDS}\n                      color=\"black\"\n                      disabled={flip}\n                    >\n                      {centile ? \"Show SDS Chart\" : \"Show Centile Charts\"}\n                    </Button>\n                    <Button\n                      disabled={!globalState.isDataPresent}\n                      className=\"selectUpperMargin\"\n                      onClick={handleFlipResults}\n                    >\n                      {flip ? \"Chart\" : \"Results\"}\n                    </Button>\n                  </Grid.Column>\n                </Grid.Row>\n              </Grid>\n            </Segment>\n          </Grid.Column>\n        </Grid.Row>\n        <Grid.Row>\n          <Container>\n            <Message\n              icon={\"warning sign\"}\n              header={\"DISCLAIMER\"}\n              content=\"This is for demonstration purposes only and is not for clinical use.\"\n              color=\"red\"\n            />\n          </Container>\n        </Grid.Row>\n      </Grid>\n\n      <ErrorModal\n        title={errorModal.title}\n        body={errorModal.body}\n        visible={errorModal.visible}\n        handleClose={errorModal.handleClose}\n        handleCancel={errorModal.handleCancel}\n      />\n    </Fragment>\n  );\n}\n\nconst panesBlueprint = [\n  {\n    menuItem: \"Height\",\n    measurementName: \"height\",\n    key: \"Height\",\n  },\n  {\n    menuItem: \"Weight\",\n    measurementName: \"weight\",\n    key: \"Weight\",\n  },\n  {\n    menuItem: \"BMI\",\n    measurementName: \"bmi\",\n    key: \"BMI\",\n  },\n  {\n    menuItem: \"Head Circumference\",\n    measurementName: \"ofc\",\n    key: \"Head Circumference\",\n  },\n];\n\nconst themeOptions = [\n  { key: \"monochrome\", value: \"monochrome\", text: \"Monochrome\" },\n  { key: \"traditional\", value: \"traditional\", text: \"Traditional\" },\n  { key: \"tanner1\", value: \"tanner1\", text: \"Tanner 1\" },\n  { key: \"tanner2\", value: \"tanner2\", text: \"Tanner 2\" },\n  { key: \"tanner3\", value: \"tanner3\", text: \"Tanner 3\" },\n];\n\nfunction InitalErrorModalState() {\n  return {\n    visible: false,\n    title: \"\",\n    body: \"\",\n    handleClose: null,\n    handleCancel: null,\n  };\n}\n\nexport default MeasurementSegment;\n","import MeasurementSegment from \"../components/MeasurementSegment\";\n\nfunction Home() {\n  return (\n    <div>\n      <MeasurementSegment />\n    </div>\n  );\n}\n\nexport default Home;\n","import \"./App.css\";\n\n// RCPCH Components\nimport \"./components/MeasurementForm\";\nimport Home from \"./pages/Home\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}\n","// React\nimport * as ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\n// Semantic UI React\nimport \"semantic-ui-less/semantic.less\";\n\n// CSS\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}